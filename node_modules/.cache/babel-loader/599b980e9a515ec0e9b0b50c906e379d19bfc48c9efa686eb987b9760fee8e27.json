{"ast":null,"code":"import React,{useState,useEffect,useCallback,useRef}from'react';import{useParams}from'react-router-dom';import'../css/vendordetails.css';import defaultImage from'../css/vendor.jpg';import{CSSTransition,TransitionGroup}from'react-transition-group';import{useOrderUpdate}from'./OrderUpdateContext';// Import the custom hook\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function VendorDetails(_ref){let{onAddToCart}=_ref;const{id}=useParams();const[searchTerm,setSearchTerm]=useState('');const[currentPage,setCurrentPage]=useState(1);const[itemsPerPage]=useState(12);// Adjust this number as needed\nconst[vendor,setVendor]=useState(null);const[admins,setAdmins]=useState([]);const[tables,setTables]=useState([]);const[showAddTableInput,setShowAddTableInput]=useState(false);const[newTableName,setNewTableName]=useState('');const[isEditingTable,setIsEditingTable]=useState(false);const[editingTableId,setEditingTableId]=useState(null);const[editTableName,setEditTableName]=useState('');const[items,setItems]=useState([]);const[newAdminEmail,setNewAdminEmail]=useState('');const[error,setError]=useState(null);const[showSuccessMessage,setShowSuccessMessage]=useState(false);const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const[userRole,setUserRole]=useState(null);const imageRef=useRef(null);const[errorMessage,setErrorMessage]=useState(null);const[Addloading,setAddLoading]=useState({});const[setErrorTimeout]=useState(null);const[newItemName,setNewItemName]=useState('');const[newItemPrice,setNewItemPrice]=useState('');const[editingItemId,setEditingItemId]=useState(null);const[editItemName,setEditItemName]=useState('');const[editItemPrice,setEditItemPrice]=useState('');const[editItemImage,setEditItemImage]=useState('');const[sortOrder,setSortOrder]=useState('created_at');// Adjust as needed\nconst[preview,setPreview]=useState('');const[showAddItemInput,setShowAddItemInput]=useState(false);const firstItemRef=useRef(null);const[isEditingItem,setIsEditingItem]=useState(false);const[isTransitioning,setIsTransitioning]=useState(false);const[filteredItems,setFilteredItems]=useState([]);const[editItemDiscount,setEditItemDiscount]=useState('');// State for discount\nconst[totalItemsCount,setTotalItemsCount]=useState(0);const[newItemDiscount,setNewItemDiscount]=useState('');// Add this line\nconst[newItemDiscountDays,setNewItemDiscountDays]=useState('');const[editItemDiscountDays,setEditItemDiscountDays]=useState('');const[originalDiscount,setOriginalDiscount]=useState(editItemDiscount);// Add this state\nconst[isEditingDiscount,setIsEditingDiscount]=useState(false);const visiblePages=4;// number of page numbers to display initially\nconst[itemQuantities,setItemQuantities]=useState({});// State for item-specific quantities\nconst[successMessage,setSuccessMessage]=useState('');const[itemMessages,setItemMessages]=useState({});const MESSAGE_DURATION=3000;// Duration in milliseconds\nconst[itemNameError,setItemNameError]=useState('');const[itemPriceError,setItemPriceError]=useState('');const[itemDiscountError,setItemDiscountError]=useState('');const[itemDiscountDaysError,setItemDiscountDaysError]=useState('');const[setIsAddingItem]=useState(false);// To track item addition status\nconst{shouldUpdateOrders,setShouldUpdateOrders}=useOrderUpdate();const[newItemQuantity,setNewItemQuantity]=useState(1);const[editItemQuantity,setEditItemQuantity]=useState(1);const[itemQuantityError,setItemQuantityError]=useState('');const[isEditingQuantity,setIsEditingQuantity]=useState(false);////////////////carts and items////////////////////\nconst handleAnimationEnd=()=>{setTimeout(()=>{setSuccessMessage('');},MESSAGE_DURATION);};// Initialize state to manage quantities for each item\nconst handleQuantityChange=(itemId,delta)=>{setItemQuantities(prevQuantities=>({...prevQuantities,[itemId]:Math.max(1,(prevQuantities[itemId]||1)+delta)// Ensure quantity is at least 1\n}));};const handleAddToCart=async item=>{const token=localStorage.getItem('token');// Get the quantity for the specific item, default to 1 if invalid\nlet quantity=itemQuantities[item.id];if(isNaN(quantity)||quantity<1){quantity=1;// Default to 1 if quantity is invalid\nsetItemQuantities(prevQuantities=>({...prevQuantities,[item.id]:quantity// Update the state with the default quantity\n}));}setAddLoading(prevState=>({...prevState,[item.id]:true}));try{const response=await fetch('http://localhost:8080/cartitems',{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded','Authorization':`Bearer ${token}`},body:new URLSearchParams({item_id:item.id,quantity:quantity}).toString()});if(!response.ok){const errorData=await response.json();setItemMessages(prevMessages=>({...prevMessages,[item.id]:` ${errorData.error||'Failed to add item to cart'}`}));setTimeout(()=>{setItemMessages(prevMessages=>({...prevMessages,[item.id]:''}));},MESSAGE_DURATION);throw new Error(errorData.error||'Unknown error');}const data=await response.json();setItemMessages(prevMessages=>({...prevMessages,[item.id]:''// Clear any existing item-specific messages\n}));setSuccessMessage(\"Item successfully added to cart!\");setShowSuccessMessage(true);setTimeout(()=>{setSuccessMessage('');},MESSAGE_DURATION);onAddToCart(data.cartItems);// Trigger cart refresh\n}catch(error){setItemMessages(prevMessages=>({...prevMessages,[item.id]:`${error.message||'An unknown error occurred while adding to cart.'}`}));setTimeout(()=>{setItemMessages(prevMessages=>({...prevMessages,[item.id]:''}));},MESSAGE_DURATION);}finally{setAddLoading(prevState=>({...prevState,[item.id]:false}));}};useEffect(()=>{let timeoutId;if(showSuccessMessage){timeoutId=setTimeout(()=>{setShowSuccessMessage(false);},MESSAGE_DURATION);}return()=>clearTimeout(timeoutId);},[showSuccessMessage]);const handleErrorMessageTimeout=()=>{setErrorMessage(null);setError(null);// Clear the error state as well\n};// existing state variables...\nconst fetchVendorItems=useCallback(async()=>{const token=localStorage.getItem('token');try{const response=await fetch(`http://localhost:8080/vendor/${id}/items?page=${currentPage}&page_size=${itemsPerPage}`,{headers:{Authorization:`Bearer ${token}`}});if(!response.ok){throw new Error('Failed to fetch items');}const data=await response.json();setItems(data.items||[]);setFilteredItems(data.items||[]);// Initialize filtered items\n}catch(error){console.error(\"Error fetching items:\",error);setError('An unexpected error occurred while fetching vendor items');}},[id,currentPage,itemsPerPage]);const handleImageClick=e=>{const file=e.target.files[0];if(file){setEditItemImage(file);// Update editItemImage state with the new file\nconst reader=new FileReader();reader.onloadend=()=>{setPreview(reader.result);};reader.readAsDataURL(file);}else{setPreview(defaultImage);// Set to default if no file selected\n}};useEffect(()=>{fetchVendorItems();},[fetchVendorItems,newItemName]);useEffect(()=>{let sortedItems=[...items];if(sortOrder==='created_at'){sortedItems.sort((a,b)=>new Date(b.created_at)-new Date(a.created_at));}else if(sortOrder==='price'){sortedItems.sort((a,b)=>a.price-b.price);}else if(sortOrder==='name'){sortedItems.sort((a,b)=>a.name.localeCompare(b.name));}setFilteredItems(sortedItems);},[sortOrder,items]);const handleNextPage=()=>{if(currentPage<totalPages){setIsTransitioning(true);setCurrentPage(prevPage=>prevPage+1);}};const handlePreviousPage=()=>{if(currentPage>1){setIsTransitioning(true);setCurrentPage(prevPage=>prevPage-1);}};useEffect(()=>{if(isTransitioning){console.log(\"Transitioning...\");fetchVendorItems().then(()=>{setIsTransitioning(false);console.log(\"Fetching items and ending transition.\");// Scroll after the items are rendered\nrequestAnimationFrame(()=>{if(firstItemRef.current){const offsetPosition=firstItemRef.current.getBoundingClientRect().top+window.scrollY-250;// Adjust the offset\nwindow.scrollTo({top:offsetPosition,behavior:'smooth'});}});});}},[isTransitioning,fetchVendorItems]);const fetchUserOrders=useCallback(async()=>{try{const token=localStorage.getItem('token');const response=await fetch('http://localhost:8080/orders',{headers:{Authorization:`Bearer ${token}`}});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error||'Failed to fetch orders';setErrorMessage(errorMessage);return[];}const data=await response.json();setOrders(data.orders||[]);}catch(error){setErrorMessage('An unexpected error occurred while fetching user orders');setTimeout(()=>{setErrorMessage(null);},3000);}},[]);useEffect(()=>{fetchUserOrders();},[fetchUserOrders,shouldUpdateOrders]);// Trigger fetch when shouldUpdateOrders changes\nuseEffect(()=>{if(shouldUpdateOrders){fetchUserOrders();setShouldUpdateOrders(false);// Reset the update flag\n}},[shouldUpdateOrders,fetchUserOrders,setShouldUpdateOrders]);const handleSearchChange=event=>{const searchValue=event.target.value;setSearchTerm(searchValue);if(searchValue){const results=items.filter(item=>item.name.toLowerCase().includes(searchValue.toLowerCase()));setFilteredItems(results);}else{setFilteredItems(items);// Reset to all items when search term is empty\n}};const fetchVendorDetails=useCallback(async()=>{try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendors/${id}`,{headers:{Authorization:`Bearer ${token}`}});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error||'An error occurred while fetching vendor details';setError(errorMessage);return;}const data=await response.json();if(data&&data.vendor){setVendor(data.vendor);}else{setError('Vendor data is undefined or null');}}catch(error){setError('An unexpected error occurred while fetching vendor details');}finally{setLoading(false);}},[id]);const[currentUserId,setCurrentUserId]=useState(null);// Add this line\nconst fetchUserRole=useCallback(async()=>{try{const token=localStorage.getItem('token');if(token){const response=await fetch('http://localhost:8080/me',{headers:{Authorization:`Bearer ${token}`}});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error||'Failed to fetch user role';setError(errorMessage);return;}const data=await response.json();setUserRole(data.me.user_role);setCurrentUserId(data.me.user_info.id);// Update the currentUserId state correctly\n}}catch(error){setError('An unexpected error occurred while fetching user role');}},[]);const totalPages=Math.ceil(totalItemsCount/itemsPerPage);const fetchTotalItemsCount=useCallback(async()=>{try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendor/${id}/itemscount`,{headers:{Authorization:`Bearer ${token}`}});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error||'Failed to fetch total items count';setError(errorMessage);return;}const data=await response.json();setTotalItemsCount(data.totalCount);// Update the state with the totalCount property\n}catch(error){setError('An unexpected error occurred while fetching total items count');}},[id]);const fetchVendorAdmins=useCallback(async()=>{try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendors/${id}/admins`,{headers:{Authorization:`Bearer ${token}`}});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error||'Failed to fetch vendor admins';setError(errorMessage);return;}const data=await response.json();setAdmins(data.vendor_admin||[]);}catch(error){setError('An unexpected error occurred while fetching vendor admins');}},[id]);const fetchVendorTables=useCallback(async()=>{try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendor/${id}/tables`,{headers:{Authorization:`Bearer ${token}`}});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error||'Failed to fetch vendor tables';setError(errorMessage);return;}const data=await response.json();console.log(data);setTables(data.tables||[]);}catch(error){setError('An unexpected error occurred while fetching vendor tables');}},[id]);const fetchUserTables=useCallback(async()=>{try{const token=localStorage.getItem(\"token\");const response=await fetch(\"http://localhost:8080/usertable\",{headers:{Authorization:`Bearer ${token}`}});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error;if(errorMessage===\"User already have a table\"){setErrorMessage(\"You already have a table!\");// Updated message\n}else if(errorMessage!==\"User has no table\"){setError(errorMessage);}return[];// Return an empty array on error\n}const data=await response.json();return Array.isArray(data.tables)?data.tables:[];// Ensure this always returns an array\n}catch(error){setErrorMessage('An unexpected error occurred while fetching user tables');setErrorTimeout(setTimeout(()=>{setErrorMessage(null);},3000));}},[setErrorTimeout]);useEffect(()=>{if(errorMessage){const timeoutId=setTimeout(handleErrorMessageTimeout,3000);// 3000ms = 3 seconds\nreturn()=>clearTimeout(timeoutId);}if(error){const timeoutId=setTimeout(handleErrorMessageTimeout,3000);// 3000ms = 3 seconds\nreturn()=>clearTimeout(timeoutId);}},[error,errorMessage]);useEffect(()=>{const fetchData=async()=>{try{await fetchVendorDetails();await fetchUserRole();await fetchVendorAdmins();await fetchVendorTables();await fetchTotalItemsCount();await fetchVendorItems();await fetchUserTables();await fetchUserOrders();setLoading(false);// Set loading to false after fetching data\n}catch(error){console.error('Error fetching data:',error);setError('An error occurred while fetching data.');setLoading(false);// Set loading to false in case of error\n}};fetchData();},[fetchVendorDetails,fetchUserRole,fetchVendorAdmins,fetchUserTables,fetchVendorItems,fetchVendorTables,fetchUserOrders,fetchTotalItemsCount]);useEffect(()=>{const totalPages=Math.ceil(totalItemsCount/itemsPerPage);console.log(`Total pages: ${totalPages}`);},[totalItemsCount,itemsPerPage]);useEffect(()=>{const totalPages=Math.ceil(totalItemsCount/itemsPerPage);console.log(`Total pages: ${totalPages}`);},[totalItemsCount,itemsPerPage]);const handleImageHover=()=>{if(imageRef.current){imageRef.current.style.cursor='pointer';}};const handleImageLeave=()=>{if(imageRef.current){imageRef.current.style.cursor='default';}};const handleImageError=e=>{e.target.src=defaultImage;};const handleAddAdmin=async()=>{if(!newAdminEmail)return;try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendors/${id}/admins`,{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded',Authorization:`Bearer ${token}`},body:new URLSearchParams({Email:newAdminEmail})});if(!response.ok){const errorData=await response.json();let errorMessage;if(typeof errorData.error==='string'){errorMessage=errorData.error;}else if(Array.isArray(errorData.error)){errorMessage=errorData.error.join(', ');}else{errorMessage='Failed to add admin';}setError(errorMessage);// Set error state\nreturn;}setNewAdminEmail('');fetchVendorAdmins();// Refresh admin list\n}catch(error){setError('An unexpected error occurred while adding admin');}};const handleRemoveAdmin=async adminId=>{try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendors/${id}/admins/${adminId}`,{method:'DELETE',headers:{Authorization:`Bearer ${token}`}});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error||'Failed to remove admin';setError(errorMessage);return;}// Remove the admin from the list\nsetAdmins(prevAdmins=>prevAdmins.filter(admin=>admin.user_id!==adminId));}catch(error){setError('An unexpected error occurred while removing admin');}};const handleUpdateQuantity=async()=>{console.log('handleUpdateQuantity called');setItemQuantityError('');if(editItemQuantity<=0){setItemQuantityError('Quantity must be greater than 0.');return;}try{const token=localStorage.getItem('token');console.log('Token:',token);const body=new URLSearchParams({quantity:editItemQuantity}).toString();console.log('Request Body:',body);const response=await fetch(`http://localhost:8080/vendor/${id}/items/${editingItemId}`,{method:'PUT',headers:{'Content-Type':'application/x-www-form-urlencoded',Authorization:`Bearer ${token}`},body:body});console.log('Response Status:',response.status);if(!response.ok){var _errorData$error;const errorData=await response.json();console.log('Error Data:',errorData);setItemQuantityError(((_errorData$error=errorData.error)===null||_errorData$error===void 0?void 0:_errorData$error.quantity)||'');return;}// Successfully updated quantity, reset fields and close modal\nsetIsEditingQuantity(false);setEditItemQuantity(1);fetchVendorItems();// Refresh item list\n}catch(error){console.error('Error updating quantity:',error);}};const handleRemoveTable=async tableId=>{try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendor/${id}/tables/${tableId}`,{method:'DELETE',headers:{Authorization:`Bearer ${token}`}});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error||'Failed to remove table';setError(errorMessage);return;}// Remove the table from the list\nsetTables(prevTables=>prevTables.filter(table=>table.id!==tableId));}catch(error){setError('An unexpected error occurred while removing table');}};const handleAddTable=async()=>{if(!newTableName)return;try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendor/${id}/tables`,{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded',Authorization:`Bearer ${token}`},body:new URLSearchParams({name:newTableName})});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error||'Failed to add table';setError(errorMessage);return;}setNewTableName('');setShowAddTableInput(false);fetchVendorTables();// Refresh table list\n}catch(error){setError('An unexpected error occurred while adding the table');}};const handleUpdateDiscount=async()=>{setItemDiscountError('');setItemDiscountDaysError('');const body=new URLSearchParams();// If the discount is set to 0\nif(editItemDiscount===0){body.append('discount',0);setEditItemDiscount(0);// Reset state\nsetEditItemDiscountDays(0);// Reset expiration days to 0\nbody.append('discount_days',0);// Also set discount_days to 0\n}else if(editItemDiscount!==originalDiscount){body.append('discount',editItemDiscount);}// Only add expiration days if they are provided and discount is not 0\nif(editItemDiscountDays>0){body.append('discount_days',editItemDiscountDays);}// Prevent submission if the discount has changed and expiration days are required\nif(editItemDiscount!==originalDiscount&&editItemDiscount>0&&!editItemDiscountDays){alert(\"Please enter the discount expiration days.\");return;// Prevent submission if expiration days are required\n}// Prevent submission if no changes are made\nif(body.toString()===''){setIsEditingDiscount(false);return;}try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendor/${id}/items/${editingItemId}`,{method:'PUT',headers:{'Content-Type':'application/x-www-form-urlencoded',Authorization:`Bearer ${token}`},body:body});const data=await response.json();if(!response.ok){setItemDiscountError(data.error.discount||'');setItemDiscountDaysError(data.error.discount_expiry||'');return;}// Successfully updated\nsetIsEditingDiscount(false);setEditItemDiscount(0);// Reset to 0\nsetEditItemDiscountDays(0);// Reset to 0\nfetchVendorItems();// Optionally refresh the item list\n}catch(error){setError('An unexpected error occurred while updating the discount');}};const handleEditItem=item=>{setEditingItemId(item.id);setEditItemName(item.name);setEditItemPrice(item.price);setEditItemImage(item.img);setOriginalDiscount(item.discount);setEditItemQuantity(item.quantity);setEditItemDiscount(0);// Reset discount to 0\nsetEditItemDiscountDays(0);// Reset discount days to 0\nopenEditItemForm();};const handleUpdateItem=async()=>{setItemNameError('');setItemPriceError('');setItemQuantityError('');setItemDiscountError('');setItemDiscountDaysError('');// Validate inputs\nif(!editItemName||!editItemPrice){if(!editItemName){setItemNameError('Item name is required.');}if(!editItemPrice){setItemPriceError('Price is required.');}return;}// Client-side validation\nif(editItemName.length>20){setItemNameError('Item name must be less than 20 characters.');return;}if(editItemPrice<=0){setItemPriceError('Price must be greater than 0.');return;}if(editItemQuantity<0){setItemQuantityError('Quantity must be greater than 0.');return;}// Prepare form data\nconst body=new FormData();if(editItemImage){body.append('img',editItemImage);}body.append('name',editItemName);body.append('price',editItemPrice);body.append('quantity',editItemQuantity);if(editItemDiscount){body.append('discount',editItemDiscount);body.append('discount_days',editItemDiscountDays);}// Send the request\ntry{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendor/${id}/items/${editingItemId}`,{method:'PUT',headers:{Authorization:`Bearer ${token}`},body:body});if(!response.ok){var _errorData$error2,_errorData$error3,_errorData$error4,_errorData$error5,_errorData$error6;const errorData=await response.json();setItemNameError(((_errorData$error2=errorData.error)===null||_errorData$error2===void 0?void 0:_errorData$error2.name)||'');setItemPriceError(((_errorData$error3=errorData.error)===null||_errorData$error3===void 0?void 0:_errorData$error3.price)||'');setItemQuantityError(((_errorData$error4=errorData.error)===null||_errorData$error4===void 0?void 0:_errorData$error4.quantity)||'');setItemDiscountError(((_errorData$error5=errorData.error)===null||_errorData$error5===void 0?void 0:_errorData$error5.discount)||'');setItemDiscountDaysError(((_errorData$error6=errorData.error)===null||_errorData$error6===void 0?void 0:_errorData$error6.discountDays)||'');return;}// Successfully updated item, reset fields and close modal\nsetIsEditingItem(false);setEditItemName('');setEditItemPrice('');setEditItemQuantity('');setEditItemImage('');setEditItemDiscount('');setEditItemDiscountDays('');fetchVendorItems();// Refresh item list\n}catch(error){console.error('Error updating item:',error);}};const resetErrors=()=>{setItemNameError('');setItemPriceError('');setItemDiscountError('');setItemDiscountDaysError('');};const openEditItemForm=()=>{resetErrors();setIsEditingItem(true);};const openEditDiscountForm=()=>{resetErrors();setIsEditingDiscount(true);};const handleAddItem=async()=>{var _imageRef$current;setItemNameError('');setItemPriceError('');setItemDiscountError('');setItemDiscountDaysError('');const formData=new FormData();if(newItemQuantity<=0){setItemQuantityError('Quantity must be greater than 0.');return;}formData.append('quantity',newItemQuantity);if((_imageRef$current=imageRef.current)!==null&&_imageRef$current!==void 0&&_imageRef$current.files[0]){formData.append('img',imageRef.current.files[0]);}// Validation checks\nif(!newItemName||!newItemPrice){if(!newItemName){setItemNameError('Item name is required.');}if(!newItemPrice){setItemPriceError('Price is required.');}return;}// Client-side validation\nif(newItemName.length>20){setItemNameError('Item name must be less than 20 characters.');return;}if(newItemPrice<=0){setItemPriceError('Price must be greater than 0.');return;}if(newItemDiscount<0){setItemDiscountError('Discount cannot be negative.');return;}if(newItemDiscount>newItemPrice){setItemDiscountError('Discount cannot be greater than the price.');return;}try{const token=localStorage.getItem('token');formData.append('name',newItemName);formData.append('price',newItemPrice);formData.append('discount',newItemDiscount);formData.append('discount_days',newItemDiscountDays);const response=await fetch(`http://localhost:8080/vendor/${id}/items`,{method:'POST',headers:{Authorization:`Bearer ${token}`},body:formData});if(!response.ok){const errorData=await response.json();console.error('Backend errors:',errorData);// Log the error response for debugging\n// Clear existing frontend errors\nsetItemNameError('');setItemPriceError('');setItemDiscountError('');setItemDiscountDaysError('');// Set specific backend errors\nif(errorData.error){if(errorData.error.name)setItemNameError(errorData.error.name);if(errorData.error.price)setItemPriceError(errorData.error.price);if(errorData.error.discount)setItemDiscountError(errorData.error.discount);if(errorData.error.discount_days)setItemDiscountDaysError(errorData.error.discount_days);}setPreview(null);// Reset preview on error\nreturn;}// Reset fields and close the modal only if submission is successful\nsetShowAddItemInput(false);// Close modal only on successful request\nsetNewItemName('');setNewItemPrice('');setNewItemDiscount('');setNewItemDiscountDays('');setPreview(null);// Reset preview after successful submission\nsetIsAddingItem(true);// Mark adding as successful\nsetItemNameError('');setItemPriceError('');setItemDiscountError('');setItemDiscountDaysError('');fetchVendorItems();// Refresh items\n}catch(error){console.error('Error adding item:',error);}};const handleOccupyTable=async tableId=>{try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendor/${id}/tables/${tableId}/needs-service`,{method:'PUT',headers:{Authorization:`Bearer ${token}`}});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error||'Failed to occupy the table';setError(errorMessage);return;}// Update the local state to reflect that the table is now occupied\nsetTables(prevTables=>prevTables.map(table=>table.id===tableId?{...table,is_available:false,is_needs_service:true,customer_id:currentUserId}:table));console.log('Table occupied successfully');}catch(error){setError('An unexpected error occurred while occupying the table');}};// New useEffect for handling assigned tables\nconst handleFreeTable=async tableId=>{const table=tables.find(t=>t.id===tableId);if(!table||table.customer_id!==currentUserId){setError('You can only free the table you have assigned.');return;}try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendor/${id}/tables/${tableId}/freetable`,{method:'PUT',headers:{Authorization:`Bearer ${token}`}});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error||'Failed to free the table';setError(errorMessage);return;}// Update the table state to reflect that it is now available\nsetTables(prevTables=>prevTables.map(table=>table.id===tableId?{...table,is_available:true,is_needs_service:false,customer_id:null}:table));// Update the orders state to null if the table being freed matches the table associated with the orders\nif(orders&&orders.some(order=>order.table_id===tableId)){setOrders(null);}}catch(error){setError('An unexpected error occurred while freeing the table');}};const handleRemoveDiscount=async itemId=>{const body=new URLSearchParams();body.append('discount',0);body.append('discount_days',0);try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendor/${id}/items/${itemId}`,{method:'PUT',headers:{'Content-Type':'application/x-www-form-urlencoded',Authorization:`Bearer ${token}`},body:body});if(!response.ok){const errorData=await response.json();setError(errorData.error||'Failed to remove discount');return;}// Update the specific item that had its discount removed\nconst updatedItem={...items.find(item=>item.id===itemId),discount:0,discountDays:0};setItems(prevItems=>prevItems.map(item=>item.id===itemId?updatedItem:item));}catch(error){let errorMessage;if(error instanceof Error){errorMessage=error.message;}else if(typeof error==='string'){errorMessage=error;}else{errorMessage='An unexpected error occurred while removing the discount';}setError(errorMessage);}};const handleRemoveItem=async itemId=>{try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendor/${id}/items/${itemId}`,{method:'DELETE',headers:{Authorization:`Bearer ${token}`}});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error||'Failed to remove item';setError(errorMessage);return;}// Remove the item from local state\nsetItems(prevItems=>prevItems.filter(item=>item.id!==itemId));}catch(error){setError('An unexpected error occurred while removing the item');}};const startPage=Math.max(1,currentPage-visiblePages+1);const endPage=Math.min(totalPages,currentPage+visiblePages-1);const pages=[];for(let i=startPage;i<=endPage;i++){pages.push(i);}const handleUpdateNeedsService=async(tableId,isNeedsService)=>{try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendor/${id}/table/${tableId}`,{method:'PUT',headers:{'Content-Type':'application/x-www-form-urlencoded',Authorization:`Bearer ${token}`},body:new URLSearchParams({is_needs_service:isNeedsService})});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error||'Failed to update needs service status';setError(errorMessage);return;}// Update the local state\nsetTables(prevTables=>prevTables.map(table=>table.id===tableId?{...table,is_needs_service:isNeedsService}:table));}catch(error){setError('An unexpected error occurred while updating the needs service status');}};const handleVendorFreeTable=async tableId=>{try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendor/${id}/freetable/${tableId}`,{method:'PUT',headers:{Authorization:`Bearer ${token}`}});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error||'Failed to free the table';console.error(errorMessage);setError(errorMessage);return;}console.log('Table freed successfully');// Update the local state to reflect that the table is now available\nsetTables(prevTables=>prevTables.map(table=>table.id===tableId?{...table,is_available:true,is_needs_service:false,customer_id:null}:table));}catch(error){console.error('An unexpected error occurred while freeing the table',error);setError('An unexpected error occurred while freeing the table');}};const isCurrentUserAdmin=admins.some(admin=>admin.user_id===currentUserId);const handleEditTable=table=>{setEditingTableId(table.id);setEditTableName(table.name);setIsEditingTable(true);};const handleSortOrderChange=newSortOrder=>{setSortOrder(newSortOrder);};const handleUpdateTable=async()=>{if(editTableName===undefined)return;try{const token=localStorage.getItem('token');const response=await fetch(`http://localhost:8080/vendor/${id}/table/${editingTableId}`,{method:'PUT',headers:{'Content-Type':'application/x-www-form-urlencoded',Authorization:`Bearer ${token}`},body:new URLSearchParams({name:editTableName})});if(!response.ok){const errorData=await response.json();const errorMessage=errorData.error||'Failed to update table';setError(errorMessage);return;}// Refresh the table list\nfetchVendorTables();setIsEditingTable(false);setEditTableName('');}catch(error){setError('An unexpected error occurred while updating the table');}};return/*#__PURE__*/_jsx(\"div\",{className:\"page-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-details-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-background\",children:[/*#__PURE__*/_jsx(\"img\",{src:(vendor===null||vendor===void 0?void 0:vendor.img)||defaultImage,alt:(vendor===null||vendor===void 0?void 0:vendor.name)||'Vendor',className:\"vendor-background-image\",ref:imageRef,onMouseOver:handleImageHover,onMouseOut:handleImageLeave,onError:handleImageError}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-info\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"vendor-name\",children:vendor===null||vendor===void 0?void 0:vendor.name}),/*#__PURE__*/_jsx(\"p\",{className:\"vendor-description\",children:(vendor===null||vendor===void 0?void 0:vendor.description)||'No description available'}),/*#__PURE__*/_jsx(\"button\",{className:\"items-button\",onClick:()=>document.getElementById('items-section').scrollIntoView(),children:\"View Items\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tables-section card\",children:[(userRole==='1'||userRole==='2'&&isCurrentUserAdmin)&&/*#__PURE__*/_jsx(\"div\",{className:\"add-buttons\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddTableInput(true),children:\"Add Table\"})}),showAddTableInput&&/*#__PURE__*/_jsxs(\"div\",{className:\"edit-table-modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowAddTableInput(false)}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-table-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add Table\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleAddTable();},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"new-table-name\",children:\"Table Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"new-table-name\",value:newTableName,onChange:e=>setNewTableName(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add Table\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAddTableInput(false),children:\"Cancel\"})]})]})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"Tables\"}),/*#__PURE__*/_jsx(\"div\",{className:\"tables-list\",children:tables.map(table=>/*#__PURE__*/_jsxs(\"div\",{className:\"table-card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"table-name\",children:table.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Available: \",table.is_available?'Yes':'No']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Needs Service: \",table.is_needs_service?'Yes':'No']}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-actions\",children:[table.customer_id===currentUserId&&!table.is_available&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFreeTable(table.id),children:\"Free Table\"}),/*#__PURE__*/_jsx(\"div\",{className:\"action-row\",children:table.is_available&&table.customer_id!==currentUserId&&userRole==='3'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleOccupyTable(table.id),className:\"occupy-button\",children:\"Occupy Table\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"service-actions\",children:!table.is_available&&(userRole==='1'||userRole==='2'&&isCurrentUserAdmin)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleUpdateNeedsService(table.id,!table.is_needs_service),children:table.is_needs_service?'Mark as No Needs Service':'Mark as Needs Service'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVendorFreeTable(table.id),children:\"Vendor Free Table\"})]})})]}),table.customer_id===currentUserId&&!table.is_available&&/*#__PURE__*/_jsx(\"div\",{className:\"orders-list\",children:orders?orders.filter(order=>order.table_id===table.id)// Filter orders for the specific table\n.map(order=>/*#__PURE__*/_jsxs(\"div\",{className:\"order-card\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"order-id\",children:[\"Order ID: \",order.id]}),order.item_names.map((itemName,index)=>/*#__PURE__*/_jsxs(\"p\",{children:[itemName,\": \",order.item_quantities[index]]},index)),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Price: \",order.total_order_cost]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",order.status]})]},order.id)):/*#__PURE__*/_jsx(\"p\",{children:\"No orders available.\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"edit-remove-row\",children:(userRole==='1'||userRole==='2'&&isCurrentUserAdmin)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditTable(table),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveTable(table.id),children:\"Remove\"})]})})]},table.id))}),isEditingTable&&/*#__PURE__*/_jsxs(\"div\",{className:\"edit-table-modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setIsEditingTable(false)}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-table-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Edit Table\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleUpdateTable();},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"table-name\",children:\"Table Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"table-name\",value:editTableName,onChange:e=>setEditTableName(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save Changes\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setIsEditingTable(false),children:\"Cancel\"})]})]})]}),error&&error.includes('table')&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"sort-selection\",children:/*#__PURE__*/_jsxs(\"select\",{value:sortOrder,onChange:e=>handleSortOrderChange(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"created_at\",children:\"Created at\"}),/*#__PURE__*/_jsx(\"option\",{value:\"price\",children:\"Price\"}),/*#__PURE__*/_jsx(\"option\",{value:\"name\",children:\"Name\"})]})}),showAddItemInput&&/*#__PURE__*/_jsxs(\"div\",{className:\"edit-item-modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowAddItemInput(false)}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-item-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add Item\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleAddItem();},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"new-item-name\",children:\"Item Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"new-item-name\",value:newItemName,onChange:e=>setNewItemName(e.target.value)}),itemNameError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:itemNameError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"new-item-price\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"new-item-price\",value:newItemPrice,onChange:e=>setNewItemPrice(e.target.value)}),itemPriceError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:itemPriceError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newItemQuantity\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"newItemQuantity\",value:newItemQuantity,onChange:e=>setNewItemQuantity(e.target.value)}),itemQuantityError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:itemQuantityError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newItemDiscount\",children:\"Discount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"newItemDiscount\",value:newItemDiscount,onChange:e=>{const discountValue=e.target.value;setNewItemDiscount(discountValue);if(discountValue===''){setNewItemDiscountDays('');// Reset discount days if discount is removed\n}}}),itemDiscountError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:itemDiscountError})]}),newItemDiscount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newItemDiscountDays\",children:\"Discount Expiration (days)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"newItemDiscountDays\",value:newItemDiscountDays,onChange:e=>setNewItemDiscountDays(e.target.value)}),itemDiscountDaysError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:itemDiscountDaysError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"new-item-image\",children:\"Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:imageRef,onChange:handleImageClick,style:{display:'none'}}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-image-container\",onClick:()=>{var _imageRef$current2;return(_imageRef$current2=imageRef.current)===null||_imageRef$current2===void 0?void 0:_imageRef$current2.click();},children:/*#__PURE__*/_jsx(\"img\",{src:preview||defaultImage,alt:\"Preview\",className:\"profile-image\",onError:handleImageError})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"ADD\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAddItemInput(false),children:\"Cancel\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"custom-search-container\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:handleSearchChange,placeholder:\"Search items...\",className:\"custom-search-input\"})}),(userRole==='1'||userRole==='2'&&isCurrentUserAdmin)&&/*#__PURE__*/_jsx(\"div\",{className:\"add-buttons\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddItemInput(true),children:\"Add Item\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"items-section card items-transition\",id:\"items-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"Items\"}),/*#__PURE__*/_jsxs(TransitionGroup,{className:\"items-list\",children:[filteredItems.map((item,index)=>/*#__PURE__*/_jsx(CSSTransition,{classNames:\"items-transition\",timeout:500,children:/*#__PURE__*/_jsxs(\"div\",{className:\"item-card\",ref:index===0?firstItemRef:null,children:[/*#__PURE__*/_jsx(\"div\",{className:\"item-image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:item.img||defaultImage,alt:item.name,className:\"item-image\",onError:handleImageError})}),/*#__PURE__*/_jsx(\"h3\",{className:\"item-name\",children:item.name}),item.discount>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"original-price\",children:[\"Price: $\",item.price.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"discounted-price\",children:[\"Discounted Price: $\",item.discount.toFixed(2)]})]}):/*#__PURE__*/_jsxs(\"p\",{className:\"item-price\",children:[\"Price: $\",item.price.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-quantity\",children:[\"Quantity: \",item.quantity]}),item.quantity===0?/*#__PURE__*/_jsx(\"p\",{className:\"out-of-stock\",children:\"Out of Stock\"}):userRole==='3'&&/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-input\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleQuantityChange(item.id,-1),children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{children:itemQuantities[item.id]||1}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleQuantityChange(item.id,1),children:\"+\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddToCart(item),children:\"Add to cart\"}),Addloading[item.id]&&/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-remove-row\",children:[(userRole==='1'||userRole==='2'&&isCurrentUserAdmin)&&/*#__PURE__*/_jsxs(\"div\",{className:\"item-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditItem(item),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveItem(item.id),children:\"Remove\"})]}),(userRole==='1'||userRole==='2'&&isCurrentUserAdmin)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditItemQuantity(item.quantity);setEditingItemId(item.id);setIsEditingQuantity(true);},children:\"Edit Quantity\"}),/*#__PURE__*/_jsx(\"div\",{className:\"discount-actions\",children:(userRole==='1'||userRole==='2'&&isCurrentUserAdmin)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditItemDiscount(item.discount);setEditItemDiscountDays(item.discountDays||'');setOriginalDiscount(item.discount);setEditingItemId(item.id);openEditDiscountForm();},children:\"Add Discount\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleRemoveDiscount(item.id),children:\"Remove Discount\"})]})})]}),itemMessages[item.id]&&/*#__PURE__*/_jsx(\"div\",{className:\"item-message\",children:itemMessages[item.id]})]})},item.id)),/*#__PURE__*/_jsx(\"div\",{className:`success-message ${!successMessage?'success-message-hidden':''}`,onAnimationEnd:handleAnimationEnd,children:successMessage})]})]}),error&&error.includes('item')&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),isEditingItem&&/*#__PURE__*/_jsxs(\"div\",{className:\"edit-item-modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setIsEditingItem(false)}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-item-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Edit Item\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleUpdateItem();},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",value:editItemName,onChange:e=>setEditItemName(e.target.value)}),itemNameError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:itemNameError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"price\",value:editItemPrice,onChange:e=>setEditItemPrice(e.target.value)}),itemPriceError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:itemPriceError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"editItemQuantity\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"editItemQuantity\",value:editItemQuantity,onChange:e=>setEditItemQuantity(e.target.value)}),itemQuantityError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:itemQuantityError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"discount\",children:\"Discount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"discount\",value:editItemDiscount,onChange:e=>setEditItemDiscount(e.target.value)}),itemDiscountError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:itemDiscountError})]}),editItemDiscount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"discountDays\",children:\"Discount Expiration (days)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"discountDays\",value:editItemDiscountDays,onChange:e=>setEditItemDiscountDays(e.target.value)}),itemDiscountDaysError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:itemDiscountDaysError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",children:\"Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:imageRef,onChange:handleImageClick,style:{display:'none'}}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-image-container\",onClick:()=>{var _imageRef$current3;return(_imageRef$current3=imageRef.current)===null||_imageRef$current3===void 0?void 0:_imageRef$current3.click();},children:/*#__PURE__*/_jsx(\"img\",{src:preview||editItemImage||defaultImage,alt:\"Preview\",className:\"profile-image\",onError:handleImageError})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save Changes\"})]})]})]}),isEditingQuantity&&/*#__PURE__*/_jsxs(\"div\",{className:\"edit-quantity-modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setIsEditingQuantity(false)}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-quantity-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Edit Quantity\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleUpdateQuantity();},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"quantity\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"quantity\",value:editItemQuantity,onChange:e=>setEditItemQuantity(e.target.value)}),itemQuantityError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:itemQuantityError})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save Changes\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setIsEditingQuantity(false),children:\"Cancel\"})]})]})]}),isEditingDiscount&&/*#__PURE__*/_jsxs(\"div\",{className:\"edit-discount-modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setIsEditingDiscount(false)}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-discount-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Edit Discount\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleUpdateDiscount();},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"discount\",children:\"Discount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"discount\",value:editItemDiscount,onChange:e=>{const discountValue=e.target.value;setEditItemDiscount(discountValue);if(discountValue===''){setEditItemDiscountDays(0);// Reset discount days if discount is removed\n}}}),itemDiscountError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:itemDiscountError})]}),editItemDiscount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"discountDays\",children:\"Discount Expiration (days)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"discountDays\",value:editItemDiscountDays,onChange:e=>setEditItemDiscountDays(e.target.value)}),itemDiscountDaysError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:itemDiscountDaysError})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save Changes\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setIsEditingDiscount(false),children:\"Cancel\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePreviousPage,children:\"Previous\"}),pages.map(page=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(page),className:currentPage===page?'active':'',children:page},page)),endPage<totalPages&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(endPage+1),children:\"...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNextPage,children:\"Next\"})]}),(userRole==='1'||userRole==='2'&&isCurrentUserAdmin)&&/*#__PURE__*/_jsxs(\"div\",{className:\"admins-section card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"Admins\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-admin-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:newAdminEmail,onChange:e=>setNewAdminEmail(e.target.value),placeholder:\"Admin email\",className:\"admin-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddAdmin,className:\"admin-button\",children:\"Add Admin\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"admins-list\",children:admins.map(admin=>/*#__PURE__*/_jsxs(\"li\",{className:\"admin-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:admin.email}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveAdmin(admin.user_id),children:\"Remove\"})]},admin.user_id))}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})]})]})});}export default VendorDetails;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","useParams","defaultImage","CSSTransition","TransitionGroup","useOrderUpdate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","VendorDetails","_ref","onAddToCart","id","searchTerm","setSearchTerm","currentPage","setCurrentPage","itemsPerPage","vendor","setVendor","admins","setAdmins","tables","setTables","showAddTableInput","setShowAddTableInput","newTableName","setNewTableName","isEditingTable","setIsEditingTable","editingTableId","setEditingTableId","editTableName","setEditTableName","items","setItems","newAdminEmail","setNewAdminEmail","error","setError","showSuccessMessage","setShowSuccessMessage","orders","setOrders","loading","setLoading","userRole","setUserRole","imageRef","errorMessage","setErrorMessage","Addloading","setAddLoading","setErrorTimeout","newItemName","setNewItemName","newItemPrice","setNewItemPrice","editingItemId","setEditingItemId","editItemName","setEditItemName","editItemPrice","setEditItemPrice","editItemImage","setEditItemImage","sortOrder","setSortOrder","preview","setPreview","showAddItemInput","setShowAddItemInput","firstItemRef","isEditingItem","setIsEditingItem","isTransitioning","setIsTransitioning","filteredItems","setFilteredItems","editItemDiscount","setEditItemDiscount","totalItemsCount","setTotalItemsCount","newItemDiscount","setNewItemDiscount","newItemDiscountDays","setNewItemDiscountDays","editItemDiscountDays","setEditItemDiscountDays","originalDiscount","setOriginalDiscount","isEditingDiscount","setIsEditingDiscount","visiblePages","itemQuantities","setItemQuantities","successMessage","setSuccessMessage","itemMessages","setItemMessages","MESSAGE_DURATION","itemNameError","setItemNameError","itemPriceError","setItemPriceError","itemDiscountError","setItemDiscountError","itemDiscountDaysError","setItemDiscountDaysError","setIsAddingItem","shouldUpdateOrders","setShouldUpdateOrders","newItemQuantity","setNewItemQuantity","editItemQuantity","setEditItemQuantity","itemQuantityError","setItemQuantityError","isEditingQuantity","setIsEditingQuantity","handleAnimationEnd","setTimeout","handleQuantityChange","itemId","delta","prevQuantities","Math","max","handleAddToCart","item","token","localStorage","getItem","quantity","isNaN","prevState","response","fetch","method","headers","body","URLSearchParams","item_id","toString","ok","errorData","json","prevMessages","Error","data","cartItems","message","timeoutId","clearTimeout","handleErrorMessageTimeout","fetchVendorItems","Authorization","console","handleImageClick","e","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","sortedItems","sort","a","b","Date","created_at","price","name","localeCompare","handleNextPage","totalPages","prevPage","handlePreviousPage","log","then","requestAnimationFrame","current","offsetPosition","getBoundingClientRect","top","window","scrollY","scrollTo","behavior","fetchUserOrders","handleSearchChange","event","searchValue","value","results","filter","toLowerCase","includes","fetchVendorDetails","currentUserId","setCurrentUserId","fetchUserRole","me","user_role","user_info","ceil","fetchTotalItemsCount","totalCount","fetchVendorAdmins","vendor_admin","fetchVendorTables","fetchUserTables","Array","isArray","fetchData","handleImageHover","style","cursor","handleImageLeave","handleImageError","src","handleAddAdmin","Email","join","handleRemoveAdmin","adminId","prevAdmins","admin","user_id","handleUpdateQuantity","status","_errorData$error","handleRemoveTable","tableId","prevTables","table","handleAddTable","handleUpdateDiscount","append","alert","discount","discount_expiry","handleEditItem","img","openEditItemForm","handleUpdateItem","length","FormData","_errorData$error2","_errorData$error3","_errorData$error4","_errorData$error5","_errorData$error6","discountDays","resetErrors","openEditDiscountForm","handleAddItem","_imageRef$current","formData","discount_days","handleOccupyTable","map","is_available","is_needs_service","customer_id","handleFreeTable","find","t","some","order","table_id","handleRemoveDiscount","updatedItem","prevItems","handleRemoveItem","startPage","endPage","min","pages","i","push","handleUpdateNeedsService","isNeedsService","handleVendorFreeTable","isCurrentUserAdmin","handleEditTable","handleSortOrderChange","newSortOrder","handleUpdateTable","undefined","className","children","alt","ref","onMouseOver","onMouseOut","onError","description","onClick","document","getElementById","scrollIntoView","onSubmit","preventDefault","htmlFor","type","onChange","item_names","itemName","index","item_quantities","total_order_cost","discountValue","display","_imageRef$current2","click","placeholder","classNames","timeout","toFixed","onAnimationEnd","_imageRef$current3","page","email"],"sources":["C:/Users/oG_Ju/OneDrive/Desktop/SadeemVendorapp/frontend/src/components/vendordetails.js"],"sourcesContent":["\r\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { useParams,  } from 'react-router-dom';\r\nimport '../css/vendordetails.css';\r\nimport defaultImage from '../css/vendor.jpg';\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\r\nimport { useOrderUpdate } from './OrderUpdateContext'; // Import the custom hook\r\n\r\nfunction VendorDetails({ onAddToCart }) {\r\n  const { id } = useParams();\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [itemsPerPage] = useState(12 ); // Adjust this number as needed\r\n  const [vendor, setVendor] = useState(null);\r\n  const [admins, setAdmins] = useState([]);\r\n  const [tables, setTables] = useState([]);\r\n  const [showAddTableInput, setShowAddTableInput] = useState(false);\r\n  const [newTableName, setNewTableName] = useState('');\r\n  const [isEditingTable, setIsEditingTable] = useState(false);\r\n  const [editingTableId, setEditingTableId] = useState(null);\r\n  const [editTableName, setEditTableName] = useState('');\r\n  const [items, setItems] = useState([]);\r\n  const [newAdminEmail, setNewAdminEmail] = useState('');\r\n  const [error, setError] = useState(null);\r\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false);\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [userRole, setUserRole] = useState(null);\r\n  const imageRef = useRef(null);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n  const [Addloading, setAddLoading] = useState({});\r\n\r\n  const [setErrorTimeout] = useState(null);\r\n  const [newItemName, setNewItemName] = useState('');\r\n  const [newItemPrice, setNewItemPrice] = useState('');\r\n  const [editingItemId,setEditingItemId] = useState(null);\r\n  const [editItemName, setEditItemName] = useState('');\r\n  const [editItemPrice, setEditItemPrice] = useState('');\r\n  const [editItemImage, setEditItemImage] = useState('');\r\n\r\n\r\n  const [sortOrder,setSortOrder] = useState('created_at'); // Adjust as needed\r\n  const [preview, setPreview] = useState('');\r\n  const [showAddItemInput, setShowAddItemInput] = useState(false);\r\n  const firstItemRef = useRef(null);\r\n  const [isEditingItem, setIsEditingItem] = useState(false);\r\n  const [isTransitioning, setIsTransitioning] = useState(false);\r\n  const [filteredItems, setFilteredItems] = useState([]);\r\n  const [editItemDiscount, setEditItemDiscount] = useState(''); // State for discount\r\nconst [totalItemsCount, setTotalItemsCount] = useState(0);\r\nconst [newItemDiscount, setNewItemDiscount] = useState(''); // Add this line\r\nconst [newItemDiscountDays, setNewItemDiscountDays] = useState('');\r\nconst [editItemDiscountDays, setEditItemDiscountDays] = useState('');\r\nconst [originalDiscount, setOriginalDiscount] = useState(editItemDiscount); // Add this state\r\nconst [isEditingDiscount, setIsEditingDiscount] = useState(false);\r\nconst visiblePages = 4; // number of page numbers to display initially\r\nconst [itemQuantities, setItemQuantities] = useState({}); // State for item-specific quantities\r\nconst [successMessage, setSuccessMessage] = useState('');\r\nconst [itemMessages, setItemMessages] = useState({});\r\nconst MESSAGE_DURATION = 3000; // Duration in milliseconds\r\nconst [itemNameError, setItemNameError] = useState('');\r\nconst [itemPriceError, setItemPriceError] = useState('');\r\nconst [itemDiscountError, setItemDiscountError] = useState('');\r\nconst [itemDiscountDaysError, setItemDiscountDaysError] = useState('');\r\nconst [ setIsAddingItem] = useState(false); // To track item addition status\r\nconst { shouldUpdateOrders, setShouldUpdateOrders } = useOrderUpdate();\r\nconst [newItemQuantity, setNewItemQuantity] = useState(1);\r\nconst [editItemQuantity, setEditItemQuantity] = useState(1);\r\nconst [itemQuantityError, setItemQuantityError] = useState('');\r\nconst [isEditingQuantity, setIsEditingQuantity] = useState(false);\r\n\r\n////////////////carts and items////////////////////\r\nconst handleAnimationEnd = () => {\r\n  setTimeout(() => {\r\n    setSuccessMessage('');\r\n  }, MESSAGE_DURATION);\r\n};\r\n  // Initialize state to manage quantities for each item\r\n\r\n\r\n  const handleQuantityChange = (itemId, delta) => {\r\n    setItemQuantities(prevQuantities => ({\r\n      ...prevQuantities,\r\n      [itemId]: Math.max(1, (prevQuantities[itemId] || 1) + delta) // Ensure quantity is at least 1\r\n    }));\r\n  };\r\n  const handleAddToCart = async (item) => {\r\n    const token = localStorage.getItem('token');\r\n\r\n    // Get the quantity for the specific item, default to 1 if invalid\r\n    let quantity = itemQuantities[item.id];\r\n    if (isNaN(quantity) || quantity < 1) {\r\n      quantity = 1; // Default to 1 if quantity is invalid\r\n      setItemQuantities(prevQuantities => ({\r\n        ...prevQuantities,\r\n        [item.id]: quantity, // Update the state with the default quantity\r\n      }));\r\n    }\r\n\r\n    setAddLoading(prevState => ({ ...prevState, [item.id]: true }));\r\n  \r\n    try {\r\n      const response = await fetch('http://localhost:8080/cartitems', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/x-www-form-urlencoded',\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n        body: new URLSearchParams({\r\n          item_id: item.id,\r\n          quantity: quantity,\r\n        }).toString(),\r\n      });\r\n  \r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        setItemMessages(prevMessages => ({\r\n          ...prevMessages,\r\n          [item.id]: ` ${errorData.error || 'Failed to add item to cart'}`,\r\n        }));\r\n        setTimeout(() => {\r\n          setItemMessages(prevMessages => ({\r\n            ...prevMessages,\r\n            [item.id]: ''\r\n          }));\r\n        }, MESSAGE_DURATION);\r\n        throw new Error(errorData.error || 'Unknown error');\r\n      }\r\n  \r\n      const data = await response.json();\r\n      setItemMessages(prevMessages => ({\r\n        ...prevMessages,\r\n        [item.id]: '', // Clear any existing item-specific messages\r\n      }));\r\n      setSuccessMessage(\"Item successfully added to cart!\");\r\n      setShowSuccessMessage(true);    \r\n      setTimeout(() => {\r\n        setSuccessMessage('');\r\n      }, MESSAGE_DURATION);\r\n  \r\n      onAddToCart(data.cartItems); // Trigger cart refresh\r\n    } catch (error) {\r\n      setItemMessages(prevMessages => ({\r\n        ...prevMessages,\r\n        [item.id]: `${error.message || 'An unknown error occurred while adding to cart.'}`,\r\n      }));\r\n      setTimeout(() => {\r\n        setItemMessages(prevMessages => ({\r\n          ...prevMessages,\r\n          [item.id]: ''\r\n        }));\r\n      }, MESSAGE_DURATION);\r\n    }finally{\r\n      setAddLoading(prevState => ({ ...prevState, [item.id]: false }));\r\n    }\r\n  };\r\n  \r\nuseEffect(() => {\r\n  let timeoutId;\r\n  if (showSuccessMessage) {\r\n    timeoutId = setTimeout(() => {\r\n      setShowSuccessMessage(false);\r\n    }, MESSAGE_DURATION);\r\n  }\r\n  return () => clearTimeout(timeoutId);\r\n}, [showSuccessMessage]);\r\n\r\nconst handleErrorMessageTimeout = () => {\r\n      setErrorMessage(null);\r\n      setError(null); // Clear the error state as well\r\n    };\r\n       // existing state variables...\r\n       const fetchVendorItems = useCallback(async () => {\r\n        const token = localStorage.getItem('token');\r\n        try {\r\n          const response = await fetch(`http://localhost:8080/vendor/${id}/items?page=${currentPage}&page_size=${itemsPerPage}`, {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n            },\r\n          });\r\n      \r\n          if (!response.ok) {\r\n            throw new Error('Failed to fetch items');\r\n          }\r\n      \r\n          const data = await response.json();\r\n          \r\n          setItems(data.items || []);\r\n            setFilteredItems(data.items || []); // Initialize filtered items\r\n        } catch (error) {\r\n          console.error(\"Error fetching items:\", error);\r\n          setError('An unexpected error occurred while fetching vendor items');\r\n        }\r\n      }, [id, currentPage, itemsPerPage]);\r\n      const handleImageClick = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n          setEditItemImage(file); // Update editItemImage state with the new file\r\n          const reader = new FileReader();\r\n          reader.onloadend = () => {\r\n            setPreview(reader.result);\r\n          };\r\n          reader.readAsDataURL(file);\r\n        } else {\r\n          setPreview(defaultImage); // Set to default if no file selected\r\n        }\r\n      };\r\n      useEffect(() => {\r\n        fetchVendorItems();\r\n      }, [fetchVendorItems, newItemName]);\r\n    useEffect(() => {\r\n      let sortedItems = [...items];\r\n    \r\n      if (sortOrder === 'created_at') {\r\n        sortedItems.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\r\n      } else if (sortOrder === 'price') {\r\n        sortedItems.sort((a, b) => a.price - b.price);\r\n      } else if (sortOrder === 'name') {\r\n        sortedItems.sort((a, b) => a.name.localeCompare(b.name));\r\n      }\r\n    \r\n      setFilteredItems(sortedItems);\r\n    }, [sortOrder, items]);\r\n\r\n\r\n  \r\nconst handleNextPage = () => {\r\n  if (currentPage < totalPages) {\r\n      setIsTransitioning(true);\r\n      setCurrentPage(prevPage => prevPage + 1);\r\n  }\r\n};\r\n\r\nconst handlePreviousPage = () => {\r\n  if (currentPage > 1) {\r\n      setIsTransitioning(true);\r\n      setCurrentPage(prevPage => prevPage - 1);\r\n  }\r\n};\r\n\r\nuseEffect(() => {\r\n  if (isTransitioning) {\r\n      console.log(\"Transitioning...\");\r\n      fetchVendorItems().then(() => {\r\n          setIsTransitioning(false);\r\n          console.log(\"Fetching items and ending transition.\");\r\n\r\n          // Scroll after the items are rendered\r\n          requestAnimationFrame(() => {\r\n              if (firstItemRef.current) {\r\n                  const offsetPosition = firstItemRef.current.getBoundingClientRect().top + window.scrollY - 250; // Adjust the offset\r\n                  window.scrollTo({\r\n                      top: offsetPosition,\r\n                      behavior: 'smooth'\r\n                  });\r\n              }\r\n          });\r\n      });\r\n  }\r\n}, [isTransitioning, fetchVendorItems]);\r\nconst fetchUserOrders = useCallback(async () => {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    const response = await fetch('http://localhost:8080/orders', {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      const errorMessage = errorData.error || 'Failed to fetch orders';\r\n      setErrorMessage(errorMessage);\r\n      return [];\r\n    }\r\n\r\n    const data = await response.json();\r\n    setOrders(data.orders || []);\r\n  } catch (error) {\r\n    setErrorMessage('An unexpected error occurred while fetching user orders');\r\n    setTimeout(() => {\r\n      setErrorMessage(null);\r\n    }, 3000);\r\n  }\r\n}, []);\r\nuseEffect(() => {\r\n  fetchUserOrders();\r\n}, [fetchUserOrders, shouldUpdateOrders]); // Trigger fetch when shouldUpdateOrders changes\r\n\r\n\r\nuseEffect(() => {\r\n  if (shouldUpdateOrders) {\r\n    fetchUserOrders();\r\n    setShouldUpdateOrders(false); // Reset the update flag\r\n  }\r\n}, [shouldUpdateOrders, fetchUserOrders, setShouldUpdateOrders]);\r\n\r\n    const handleSearchChange = (event) => {\r\n      const searchValue = event.target.value;\r\n      setSearchTerm(searchValue);\r\n  \r\n      if (searchValue) {\r\n          const results = items.filter(item => \r\n              item.name.toLowerCase().includes(searchValue.toLowerCase())\r\n          );\r\n          setFilteredItems(results);\r\n      } else {\r\n          setFilteredItems(items); // Reset to all items when search term is empty\r\n      }\r\n  };\r\n  const fetchVendorDetails = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://localhost:8080/vendors/${id}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        const errorMessage = errorData.error || 'An error occurred while fetching vendor details';\r\n        setError(errorMessage);\r\n        return;\r\n      }\r\n\r\n      const data = await response.json();\r\n      if (data && data.vendor) {\r\n        setVendor(data.vendor);\r\n      } else {\r\n        setError('Vendor data is undefined or null');\r\n      }\r\n    } catch (error) {\r\n      setError('An unexpected error occurred while fetching vendor details');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [id]);\r\n  const [currentUserId, setCurrentUserId] = useState(null); // Add this line\r\n  const fetchUserRole = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      if (token) {\r\n        const response = await fetch('http://localhost:8080/me', {\r\n          headers: {\r\n            Authorization:`Bearer ${token}`,\r\n          },\r\n        });\r\n  \r\n        if (!response.ok) {\r\n          const errorData = await response.json();\r\n          const errorMessage = errorData.error || 'Failed to fetch user role';\r\n          setError(errorMessage);\r\n          return;\r\n        }\r\n  \r\n        const data = await response.json();\r\n        setUserRole(data.me.user_role);\r\n        setCurrentUserId(data.me.user_info.id); // Update the currentUserId state correctly\r\n      }\r\n    } catch (error) {\r\n      setError('An unexpected error occurred while fetching user role');\r\n    }\r\n  }, []);\r\n\r\n  const totalPages = Math.ceil(totalItemsCount / itemsPerPage);\r\nconst fetchTotalItemsCount = useCallback(async () => {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    const response = await fetch(`http://localhost:8080/vendor/${id}/itemscount`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      const errorMessage = errorData.error || 'Failed to fetch total items count';\r\n      setError(errorMessage);\r\n      return;\r\n    }\r\n\r\n    const data = await response.json();\r\n    setTotalItemsCount(data.totalCount); // Update the state with the totalCount property\r\n  } catch (error) {\r\n    setError('An unexpected error occurred while fetching total items count');\r\n  }\r\n}, [id]);\r\n  const fetchVendorAdmins = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://localhost:8080/vendors/${id}/admins`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        const errorMessage = errorData.error || 'Failed to fetch vendor admins';\r\n        setError(errorMessage);\r\n        return;\r\n      }\r\n\r\n      const data = await response.json();\r\n      setAdmins(data.vendor_admin || []);\r\n    } catch (error) {\r\n      setError('An unexpected error occurred while fetching vendor admins');\r\n    }\r\n  }, [id]);\r\n\r\n  const fetchVendorTables = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://localhost:8080/vendor/${id}/tables`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        const errorMessage = errorData.error || 'Failed to fetch vendor tables';\r\n        setError(errorMessage);\r\n        return;\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log(data)\r\n\r\n      setTables(data.tables || []);\r\n    } catch (error) {\r\n      setError('An unexpected error occurred while fetching vendor tables');\r\n    }\r\n  }, [id]);\r\n  \r\n  const fetchUserTables = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const response = await fetch(\"http://localhost:8080/usertable\", {\r\n        headers: {\r\n          Authorization:`Bearer ${token}`,\r\n        },\r\n      });\r\n  \r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        const errorMessage = errorData.error;\r\n        if (errorMessage === \"User already have a table\") {\r\n          setErrorMessage(\"You already have a table!\"); // Updated message\r\n        } else if (errorMessage !== \"User has no table\") {\r\n          setError(errorMessage);\r\n        }\r\n        return []; // Return an empty array on error\r\n      }\r\n  \r\n      const data = await response.json();\r\n      return Array.isArray(data.tables) ? data.tables : []; // Ensure this always returns an array\r\n      \r\n    } catch (error) {\r\n      setErrorMessage('An unexpected error occurred while fetching user tables');\r\n      setErrorTimeout(\r\n        setTimeout(() => {\r\n          setErrorMessage(null);\r\n        }, 3000)\r\n      );\r\n    }\r\n}, [setErrorTimeout]);\r\nuseEffect(() => {\r\n    if (errorMessage) {\r\n      const timeoutId = setTimeout(handleErrorMessageTimeout, 3000); // 3000ms = 3 seconds\r\n      return () => clearTimeout(timeoutId);\r\n    }\r\n  \r\n    if (error) {\r\n      const timeoutId = setTimeout(handleErrorMessageTimeout, 3000); // 3000ms = 3 seconds\r\n      return () => clearTimeout(timeoutId);\r\n    }\r\n  }, [error, errorMessage]);\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        await fetchVendorDetails();\r\n        await fetchUserRole();\r\n        await fetchVendorAdmins();\r\n        await fetchVendorTables();\r\n        await fetchTotalItemsCount();\r\n        await fetchVendorItems();\r\n        await fetchUserTables();\r\n        await fetchUserOrders();\r\n        setLoading(false); // Set loading to false after fetching data\r\n      } catch (error) {\r\n        console.error('Error fetching data:', error);\r\n        setError('An error occurred while fetching data.');\r\n        setLoading(false); // Set loading to false in case of error\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [fetchVendorDetails, fetchUserRole, fetchVendorAdmins, fetchUserTables,fetchVendorItems, fetchVendorTables,fetchUserOrders, fetchTotalItemsCount]);\r\n\r\nuseEffect(() => {\r\n  const totalPages = Math.ceil(totalItemsCount / itemsPerPage);\r\n  console.log(`Total pages: ${totalPages}`);\r\n}, [totalItemsCount, itemsPerPage]);\r\nuseEffect(() => {\r\n  const totalPages = Math.ceil(totalItemsCount / itemsPerPage);\r\n  console.log(`Total pages: ${totalPages}`);\r\n}, [totalItemsCount, itemsPerPage]);\r\nconst handleImageHover = () => {\r\n  if (imageRef.current) {\r\n      imageRef.current.style.cursor = 'pointer';\r\n  }\r\n};\r\n\r\nconst handleImageLeave = () => {\r\n  if (imageRef.current) {\r\n      imageRef.current.style.cursor = 'default';\r\n  }\r\n};\r\n\r\nconst handleImageError = (e) => {\r\n  e.target.src = defaultImage;\r\n};\r\nconst handleAddAdmin = async () => {\r\n  if (!newAdminEmail) return;\r\n\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    const response = await fetch(`http://localhost:8080/vendors/${id}/admins`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      body: new URLSearchParams({ Email: newAdminEmail }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n\r\n      const errorData = await response.json();\r\n\r\n      let errorMessage;\r\n      if (typeof errorData.error === 'string') {\r\n        errorMessage = errorData.error;\r\n      } else if (Array.isArray(errorData.error)) {\r\n        errorMessage = errorData.error.join(', ');\r\n      } else {\r\n        errorMessage = 'Failed to add admin';\r\n      }\r\n      setError(errorMessage); // Set error state\r\n      return;\r\n    }\r\n\r\n    setNewAdminEmail('');\r\n    fetchVendorAdmins(); // Refresh admin list\r\n  } catch (error) {\r\n    setError('An unexpected error occurred while adding admin');\r\n  }\r\n};\r\n\r\n  const handleRemoveAdmin = async (adminId) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://localhost:8080/vendors/${id}/admins/${adminId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          Authorization:`Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        const errorMessage = errorData.error || 'Failed to remove admin';\r\n        setError(errorMessage);\r\n        return;\r\n      }\r\n\r\n      // Remove the admin from the list\r\n      setAdmins((prevAdmins) => prevAdmins.filter((admin) => admin.user_id !== adminId));\r\n    } catch (error) {\r\n      setError('An unexpected error occurred while removing admin');\r\n    }\r\n  };\r\n  const handleUpdateQuantity = async () => {\r\n    console.log('handleUpdateQuantity called');\r\n    setItemQuantityError('');\r\n    if (editItemQuantity <= 0) {\r\n      setItemQuantityError('Quantity must be greater than 0.');\r\n      return;\r\n    }\r\n  \r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      console.log('Token:', token);\r\n  \r\n      const body = new URLSearchParams({ quantity: editItemQuantity }).toString();\r\n      console.log('Request Body:', body);\r\n  \r\n      const response = await fetch(`http://localhost:8080/vendor/${id}/items/${editingItemId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/x-www-form-urlencoded',\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: body,\r\n      });\r\n  \r\n      console.log('Response Status:', response.status);\r\n  \r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        console.log('Error Data:', errorData);\r\n        setItemQuantityError(errorData.error?.quantity || '');\r\n        return;\r\n      }\r\n  \r\n      // Successfully updated quantity, reset fields and close modal\r\n      setIsEditingQuantity(false);\r\n      setEditItemQuantity(1);\r\n      fetchVendorItems(); // Refresh item list\r\n    } catch (error) {\r\n      console.error('Error updating quantity:', error)\r\n    }\r\n  }  \r\n  \r\n  const handleRemoveTable = async (tableId) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://localhost:8080/vendor/${id}/tables/${tableId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          Authorization:`Bearer ${token}`,\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        const errorMessage = errorData.error || 'Failed to remove table';\r\n        setError(errorMessage);\r\n        return;\r\n      }\r\n\r\n      // Remove the table from the list\r\n      setTables((prevTables) => prevTables.filter((table) => table.id !== tableId));\r\n    } catch (error) {\r\n      setError('An unexpected error occurred while removing table');\r\n    }\r\n  };\r\n\r\n\r\n\r\n\r\n  const handleAddTable = async () => {\r\n    if (!newTableName) return;\r\n\r\n    try {\r\n        const token = localStorage.getItem('token');\r\n        const response = await fetch(`http://localhost:8080/vendor/${id}/tables`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/x-www-form-urlencoded',\r\n                Authorization: `Bearer ${token}`,\r\n            },\r\n            body: new URLSearchParams({ name: newTableName }),\r\n        });\r\n\r\n        if (!response.ok) {\r\n            const errorData = await response.json();\r\n            const errorMessage = errorData.error || 'Failed to add table';\r\n            setError(errorMessage);\r\n            return;\r\n        }\r\n\r\n        setNewTableName('');\r\n        setShowAddTableInput(false);\r\n        fetchVendorTables(); // Refresh table list\r\n    } catch (error) {\r\n        setError('An unexpected error occurred while adding the table');\r\n    }\r\n};\r\n\r\nconst handleUpdateDiscount = async () => {\r\n \r\n  setItemDiscountError('');\r\n  setItemDiscountDaysError('');\r\n  const body = new URLSearchParams();\r\n\r\n  // If the discount is set to 0\r\n  if (editItemDiscount === 0) {\r\n      body.append('discount', 0);\r\n      setEditItemDiscount(0); // Reset state\r\n      setEditItemDiscountDays(0); // Reset expiration days to 0\r\n      body.append('discount_days', 0); // Also set discount_days to 0\r\n  } else if (editItemDiscount !== originalDiscount) {\r\n      body.append('discount', editItemDiscount);\r\n  }\r\n\r\n  // Only add expiration days if they are provided and discount is not 0\r\n  if (editItemDiscountDays > 0) {\r\n      body.append('discount_days', editItemDiscountDays);\r\n  }\r\n\r\n  // Prevent submission if the discount has changed and expiration days are required\r\n  if (editItemDiscount !== originalDiscount && editItemDiscount > 0 && !editItemDiscountDays) {\r\n      alert(\"Please enter the discount expiration days.\");\r\n      return; // Prevent submission if expiration days are required\r\n  }\r\n\r\n  // Prevent submission if no changes are made\r\n  if (body.toString() === '') {\r\n      setIsEditingDiscount(false);\r\n      return;\r\n  }\r\n\r\n  try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://localhost:8080/vendor/${id}/items/${editingItemId}`, {\r\n          method: 'PUT',\r\n          headers: {\r\n              'Content-Type': 'application/x-www-form-urlencoded',\r\n              Authorization: `Bearer ${token}`,\r\n          },\r\n          body: body,\r\n      });\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        setItemDiscountError(data.error.discount || '');\r\n        setItemDiscountDaysError(data.error.discount_expiry || '');\r\n        return;\r\n    }\r\n\r\n      // Successfully updated\r\n      setIsEditingDiscount(false);\r\n      setEditItemDiscount(0); // Reset to 0\r\n      setEditItemDiscountDays(0); // Reset to 0\r\n      fetchVendorItems(); // Optionally refresh the item list\r\n  } catch (error) {\r\n      setError('An unexpected error occurred while updating the discount');\r\n  }\r\n};\r\nconst handleEditItem = (item) => {\r\n  setEditingItemId(item.id);\r\n  setEditItemName(item.name);\r\n  setEditItemPrice(item.price);\r\n  setEditItemImage(item.img);\r\n  setOriginalDiscount(item.discount);\r\n  setEditItemQuantity(item.quantity); \r\n\r\n  setEditItemDiscount(0); // Reset discount to 0\r\n  setEditItemDiscountDays(0); // Reset discount days to 0\r\n  openEditItemForm();\r\n\r\n};\r\nconst handleUpdateItem = async () => {\r\n  setItemNameError('');\r\n  setItemPriceError('');\r\n  setItemQuantityError('');\r\n  setItemDiscountError('');\r\n  setItemDiscountDaysError('');\r\n  \r\n  // Validate inputs\r\n  if (!editItemName || !editItemPrice) {\r\n      if (!editItemName) {\r\n          setItemNameError('Item name is required.');\r\n      }\r\n      if (!editItemPrice) {\r\n          setItemPriceError('Price is required.');\r\n      }\r\n      return;\r\n  }\r\n  \r\n  // Client-side validation\r\n  if (editItemName.length > 20) {\r\n      setItemNameError('Item name must be less than 20 characters.');\r\n      return;\r\n  }\r\n  if (editItemPrice <= 0) {\r\n      setItemPriceError('Price must be greater than 0.');\r\n      return;\r\n  }\r\n  if (editItemQuantity < 0) {\r\n      setItemQuantityError('Quantity must be greater than 0.');\r\n      return;\r\n  }\r\n  \r\n  // Prepare form data\r\n  const body = new FormData();\r\n  if (editItemImage) {\r\n    body.append('img', editItemImage);\r\n}\r\n\r\n  body.append('name', editItemName);\r\n  body.append('price', editItemPrice);\r\n  body.append('quantity', editItemQuantity);\r\n  if (editItemDiscount) {\r\n      body.append('discount', editItemDiscount);\r\n      body.append('discount_days', editItemDiscountDays);\r\n  }\r\n  \r\n  // Send the request\r\n  try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://localhost:8080/vendor/${id}/items/${editingItemId}`, {\r\n          method: 'PUT',\r\n          headers: {\r\n              Authorization: `Bearer ${token}`,\r\n          },\r\n          body: body,\r\n      });\r\n      \r\n      if (!response.ok) {\r\n          const errorData = await response.json();\r\n          setItemNameError(errorData.error?.name || '');\r\n          setItemPriceError(errorData.error?.price || '');\r\n          setItemQuantityError(errorData.error?.quantity || '');\r\n          setItemDiscountError(errorData.error?.discount || '');\r\n          setItemDiscountDaysError(errorData.error?.discountDays || '');\r\n          return;\r\n      }\r\n      \r\n      // Successfully updated item, reset fields and close modal\r\n      setIsEditingItem(false);\r\n      setEditItemName('');\r\n      setEditItemPrice('');\r\n      setEditItemQuantity('');\r\n      setEditItemImage('');\r\n      setEditItemDiscount('');\r\n      setEditItemDiscountDays('');\r\n      fetchVendorItems(); // Refresh item list\r\n  } catch (error) {\r\n      console.error('Error updating item:', error);\r\n  }\r\n};\r\n\r\nconst resetErrors = () => {\r\n  \r\n  setItemNameError('');\r\n  setItemPriceError('');\r\n  setItemDiscountError('');\r\n  setItemDiscountDaysError('');\r\n};\r\nconst openEditItemForm = () => {\r\n  resetErrors();\r\n  setIsEditingItem(true);\r\n};\r\n\r\nconst openEditDiscountForm = () => {\r\n  resetErrors();\r\n  setIsEditingDiscount(true);\r\n};\r\nconst handleAddItem = async () => {\r\n  setItemNameError('');\r\n  setItemPriceError('');\r\n  setItemDiscountError('');\r\n  setItemDiscountDaysError('');\r\n\r\n  const formData = new FormData();\r\nif (newItemQuantity <= 0) {\r\n  setItemQuantityError('Quantity must be greater than 0.');\r\n  return;\r\n}\r\n\r\nformData.append('quantity', newItemQuantity);\r\n  if (imageRef.current?.files[0]) {\r\n      formData.append('img', imageRef.current.files[0]);\r\n  }\r\n\r\n  // Validation checks\r\n  if (!newItemName || !newItemPrice) {\r\n      if (!newItemName) {\r\n          setItemNameError('Item name is required.');\r\n      }\r\n      if (!newItemPrice) {\r\n          setItemPriceError('Price is required.');\r\n      }\r\n      return;\r\n  }\r\n\r\n  // Client-side validation\r\n  if (newItemName.length > 20) {\r\n      setItemNameError('Item name must be less than 20 characters.');\r\n      return;\r\n  }\r\n\r\n  if (newItemPrice <= 0) {\r\n      setItemPriceError('Price must be greater than 0.');\r\n      return;\r\n  }\r\n\r\n  if (newItemDiscount < 0) {\r\n      setItemDiscountError('Discount cannot be negative.');\r\n      return;\r\n  }\r\n\r\n  if (newItemDiscount > newItemPrice) {\r\n      setItemDiscountError('Discount cannot be greater than the price.');\r\n      return;\r\n  }\r\n\r\n  try {\r\n      const token = localStorage.getItem('token');\r\n\r\n      formData.append('name', newItemName);\r\n      formData.append('price', newItemPrice);\r\n      formData.append('discount', newItemDiscount);\r\n      formData.append('discount_days', newItemDiscountDays);\r\n\r\n      const response = await fetch(`http://localhost:8080/vendor/${id}/items`, {\r\n          method: 'POST',\r\n          headers: {\r\n              Authorization: `Bearer ${token}`,\r\n          },\r\n          body: formData,\r\n      });\r\n\r\n  \r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        console.error('Backend errors:', errorData); // Log the error response for debugging\r\n        \r\n        // Clear existing frontend errors\r\n        setItemNameError('');\r\n        setItemPriceError('');\r\n        setItemDiscountError('');\r\n        setItemDiscountDaysError('');\r\n\r\n        // Set specific backend errors\r\n        if (errorData.error) {\r\n            if (errorData.error.name) setItemNameError(errorData.error.name);\r\n            if (errorData.error.price) setItemPriceError(errorData.error.price);\r\n            if (errorData.error.discount) setItemDiscountError(errorData.error.discount);\r\n            if (errorData.error.discount_days) setItemDiscountDaysError(errorData.error.discount_days);\r\n        }\r\n\r\n        setPreview(null); // Reset preview on error\r\n        return;\r\n    }\r\n      // Reset fields and close the modal only if submission is successful\r\n      setShowAddItemInput(false); // Close modal only on successful request\r\n\r\n      setNewItemName('');\r\n      setNewItemPrice('');\r\n      setNewItemDiscount('');\r\n      setNewItemDiscountDays('');\r\n      setPreview(null); // Reset preview after successful submission\r\n      setIsAddingItem(true); // Mark adding as successful\r\n      setItemNameError('');\r\n      setItemPriceError('');\r\n      setItemDiscountError('');\r\n      setItemDiscountDaysError('');\r\n      fetchVendorItems(); // Refresh items\r\n\r\n  } catch (error) {\r\n      console.error('Error adding item:', error);\r\n  }\r\n};\r\n\r\n\r\n  const handleOccupyTable = async (tableId) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://localhost:8080/vendor/${id}/tables/${tableId}/needs-service`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n  \r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        const errorMessage = errorData.error || 'Failed to occupy the table';\r\n        setError(errorMessage);\r\n        return;\r\n      }\r\n  \r\n      // Update the local state to reflect that the table is now occupied\r\n      setTables((prevTables) =>\r\n        prevTables.map((table) =>\r\n          table.id === tableId ? { ...table, is_available: false, is_needs_service: true, customer_id: currentUserId } : table\r\n        )\r\n      );\r\n  \r\n      console.log('Table occupied successfully');\r\n    } catch (error) {\r\n      setError('An unexpected error occurred while occupying the table');\r\n    }\r\n  };\r\n// New useEffect for handling assigned tables\r\nconst handleFreeTable = async (tableId) => {\r\n  const table = tables.find((t) => t.id === tableId);\r\n  if (!table || table.customer_id !== currentUserId) {\r\n      setError('You can only free the table you have assigned.');\r\n      return;\r\n  }\r\n\r\n  try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://localhost:8080/vendor/${id}/tables/${tableId}/freetable`, {\r\n          method: 'PUT',\r\n          headers: {\r\n              Authorization: `Bearer ${token}`,\r\n          },\r\n      });\r\n\r\n      if (!response.ok) {\r\n          const errorData = await response.json();\r\n          const errorMessage = errorData.error || 'Failed to free the table';\r\n          setError(errorMessage);\r\n          return;\r\n      }\r\n\r\n      // Update the table state to reflect that it is now available\r\n      setTables((prevTables) =>\r\n          prevTables.map((table) =>\r\n              table.id === tableId ? { ...table, is_available: true, is_needs_service: false, customer_id: null } : table\r\n          )\r\n      );\r\n\r\n      // Update the orders state to null if the table being freed matches the table associated with the orders\r\n      if (orders && orders.some((order) => order.table_id === tableId)) {\r\n        setOrders(null);\r\n      }\r\n  } catch (error) {\r\n      setError('An unexpected error occurred while freeing the table');\r\n  }\r\n};\r\nconst handleRemoveDiscount = async (itemId) => {\r\n  const body = new URLSearchParams();\r\n  body.append('discount', 0);\r\n  body.append('discount_days', 0);\r\n\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    const response = await fetch(`http://localhost:8080/vendor/${id}/items/${itemId}`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      body: body,\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      setError(errorData.error || 'Failed to remove discount');\r\n      return;\r\n    }\r\n\r\n    // Update the specific item that had its discount removed\r\n    const updatedItem = { ...items.find((item) => item.id === itemId), discount: 0, discountDays: 0 };\r\n    setItems((prevItems) => prevItems.map((item) => (item.id === itemId ? updatedItem : item)));\r\n  } catch (error) {\r\n    let errorMessage;\r\n    if (error instanceof Error) {\r\n      errorMessage = error.message;\r\n    } else if (typeof error === 'string') {\r\n      errorMessage = error;\r\n    } else {\r\n      errorMessage = 'An unexpected error occurred while removing the discount';\r\n    }\r\n    setError(errorMessage);\r\n  }\r\n};\r\n\r\nconst handleRemoveItem = async (itemId) => {\r\n  try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://localhost:8080/vendor/${id}/items/${itemId}`, {\r\n          method: 'DELETE',\r\n          headers: {\r\n              Authorization: `Bearer ${token}`,\r\n          },\r\n      });\r\n\r\n      if (!response.ok) {\r\n          const errorData = await response.json();\r\n          const errorMessage = errorData.error || 'Failed to remove item';\r\n          setError(errorMessage);\r\n          return;\r\n      }\r\n\r\n      // Remove the item from local state\r\n      setItems((prevItems) => prevItems.filter((item) => item.id !== itemId));\r\n  } catch (error) {\r\n      setError('An unexpected error occurred while removing the item');\r\n  }\r\n};\r\n\r\nconst startPage = Math.max(1, currentPage - visiblePages + 1);\r\nconst endPage = Math.min(totalPages, currentPage + visiblePages - 1);\r\n\r\nconst pages = [];\r\nfor (let i = startPage; i <= endPage; i++) {\r\n  pages.push(i);\r\n}\r\nconst handleUpdateNeedsService = async (tableId, isNeedsService) => {\r\n  try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://localhost:8080/vendor/${id}/table/${tableId}`, {\r\n          method: 'PUT',\r\n          headers: {\r\n              'Content-Type': 'application/x-www-form-urlencoded',\r\n              Authorization:`Bearer ${token}`,\r\n          },\r\n          body: new URLSearchParams({ is_needs_service: isNeedsService }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n          const errorData = await response.json();\r\n          const errorMessage = errorData.error || 'Failed to update needs service status';\r\n          setError(errorMessage);\r\n          return;\r\n      }\r\n\r\n      // Update the local state\r\n      setTables((prevTables) =>\r\n          prevTables.map((table) =>\r\n              table.id === tableId ? { ...table, is_needs_service: isNeedsService } : table\r\n          )\r\n      );\r\n  } catch (error) {\r\n      setError('An unexpected error occurred while updating the needs service status');\r\n  }\r\n};\r\n\r\n  const handleVendorFreeTable = async (tableId) => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://localhost:8080/vendor/${id}/freetable/${tableId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n  \r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        const errorMessage = errorData.error || 'Failed to free the table';\r\n        console.error(errorMessage);\r\n        setError(errorMessage);\r\n        return;\r\n      }\r\n  \r\n      console.log('Table freed successfully');\r\n      // Update the local state to reflect that the table is now available\r\n      setTables((prevTables) =>\r\n        prevTables.map((table) =>\r\n          table.id === tableId ? { ...table, is_available: true, is_needs_service: false, customer_id: null } : table\r\n        )\r\n      );\r\n    } catch (error) {\r\n      console.error('An unexpected error occurred while freeing the table', error);\r\n      setError('An unexpected error occurred while freeing the table');\r\n    }\r\n  };\r\n  const isCurrentUserAdmin = admins.some(admin => admin.user_id === currentUserId);\r\n  const handleEditTable = (table) => {\r\n    setEditingTableId(table.id);\r\n    setEditTableName(table.name);\r\n    setIsEditingTable(true);\r\n};\r\nconst handleSortOrderChange = (newSortOrder) => {\r\n  setSortOrder(newSortOrder);\r\n};\r\nconst handleUpdateTable = async () => {\r\n  if (editTableName === undefined) return;\r\n\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    const response = await fetch(`http://localhost:8080/vendor/${id}/table/${editingTableId}`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      body: new URLSearchParams({ name: editTableName }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      const errorMessage = errorData.error || 'Failed to update table';\r\n      setError(errorMessage);\r\n      return;\r\n    }\r\n\r\n    // Refresh the table list\r\n    fetchVendorTables();\r\n    setIsEditingTable(false);\r\n    setEditTableName('');\r\n  } catch (error) {\r\n    setError('An unexpected error occurred while updating the table');\r\n  }\r\n};\r\n\r\n  return (\r\n\r\n<div className=\"page-container\">\r\n\r\n   <div className=\"vendor-details-container\">\r\n    <div className=\"vendor-background\">\r\n      <img\r\n        src={vendor?.img || defaultImage}\r\n        alt={vendor?.name || 'Vendor'}\r\n        className=\"vendor-background-image\"\r\n        ref={imageRef}\r\n        onMouseOver={handleImageHover}\r\n        onMouseOut={handleImageLeave}\r\n        onError={handleImageError}\r\n      />\r\n      <div className=\"vendor-info\">\r\n        <h1 className=\"vendor-name\">{vendor?.name}</h1>\r\n        <p className=\"vendor-description\">{vendor?.description || 'No description available'}</p>\r\n        <button className=\"items-button\" onClick={() => document.getElementById('items-section').scrollIntoView()}>\r\n          View Items\r\n        </button>\r\n      </div>\r\n    </div>\r\n    \r\n {/* Tables Section */}\r\n<div className=\"tables-section card\">\r\n{(userRole === '1' || (userRole === '2' && isCurrentUserAdmin)) && (\r\n    <div className=\"add-buttons\">\r\n      <button onClick={() => setShowAddTableInput(true)}>Add Table</button>\r\n    </div>\r\n  )}\r\n\r\n  {showAddTableInput && (\r\n    <div className=\"edit-table-modal\">\r\n      <div className=\"modal-overlay\" onClick={() => setShowAddTableInput(false)}></div>\r\n      <div className=\"edit-table-form\">\r\n        <h3>Add Table</h3>\r\n        <form onSubmit={(e) => { e.preventDefault(); handleAddTable(); }}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"new-table-name\">Table Name</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"new-table-name\"\r\n              value={newTableName}\r\n              onChange={(e) => setNewTableName(e.target.value)}\r\n            />\r\n          </div>\r\n          <button type=\"submit\">Add Table</button>\r\n          <button type=\"button\" onClick={() => setShowAddTableInput(false)}>Cancel</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )}\r\n\r\n  <h2 className=\"section-title\">Tables</h2>\r\n  <div className=\"tables-list\">\r\n    {tables.map((table) => (\r\n      <div key={table.id} className=\"table-card\">\r\n        <h3 className=\"table-name\">{table.name}</h3>\r\n        <p>Available: {table.is_available ? 'Yes' : 'No'}</p>\r\n        <p>Needs Service: {table.is_needs_service ? 'Yes' : 'No'}</p>\r\n\r\n        <div className=\"table-actions\">\r\n          {table.customer_id === currentUserId && !table.is_available && (\r\n            <button onClick={() => handleFreeTable(table.id)}>Free Table</button>\r\n          )}\r\n\r\n          <div className=\"action-row\">\r\n            {table.is_available && (table.customer_id !== currentUserId) && userRole === '3' && (\r\n              <button onClick={() => handleOccupyTable(table.id)} className=\"occupy-button\">Occupy Table</button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"service-actions\">\r\n            {!table.is_available && (userRole === '1' || (userRole === '2' && isCurrentUserAdmin)) && (\r\n              <>\r\n                <button onClick={() => handleUpdateNeedsService(table.id, !table.is_needs_service)}>\r\n                  {table.is_needs_service ? 'Mark as No Needs Service' : 'Mark as Needs Service'}\r\n                </button>\r\n                <button onClick={() => handleVendorFreeTable(table.id)}>Vendor Free Table</button>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {table.customer_id === currentUserId && !table.is_available && (\r\n      <div className=\"orders-list\">\r\n      {orders ? (\r\n        orders\r\n          .filter(order => order.table_id === table.id) // Filter orders for the specific table\r\n          .map((order) => (\r\n            <div key={order.id} className=\"order-card\">\r\n              <h3 className=\"order-id\">Order ID: {order.id}</h3>\r\n              {order.item_names.map((itemName, index) => (\r\n                <p key={index}>\r\n                  {itemName}: {order.item_quantities[index]}\r\n                </p>\r\n              ))}\r\n              <p>Total Price: {order.total_order_cost}</p>\r\n              <p>Status: {order.status}</p>\r\n            </div>\r\n          ))\r\n      ) : (\r\n        <p>No orders available.</p>\r\n      )}\r\n    </div>\r\n        )}\r\n\r\n        <div className=\"edit-remove-row\">\r\n          {(userRole === '1' || (userRole === '2' && isCurrentUserAdmin)) && (\r\n            <>\r\n              <button onClick={() => handleEditTable(table)}>Edit</button>\r\n              <button onClick={() => handleRemoveTable(table.id)}>Remove</button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n   ))}\r\n </div>\r\n\r\n\r\n{/* Full-Screen Edit Form for Tables*/}\r\n{isEditingTable && (\r\n    <div className=\"edit-table-modal\">\r\n        <div className=\"modal-overlay\" onClick={() => setIsEditingTable(false)}></div>\r\n        <div className=\"edit-table-form\">\r\n            <h3>Edit Table</h3>\r\n            <form onSubmit={(e) => { e.preventDefault(); handleUpdateTable(); }}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"table-name\">Table Name</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"table-name\"\r\n                        value={editTableName}\r\n                        onChange={(e) => setEditTableName(e.target.value)}\r\n                    />\r\n                </div>\r\n                <button type=\"submit\">Save Changes</button>\r\n                <button type=\"button\" onClick={() => setIsEditingTable(false)}>Cancel</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n)} \r\n\r\n{error && error.includes('table') && (\r\n    <div className=\"error-message\">{error}</div>\r\n  )}\r\n  \r\n{/* Items Section */}\r\n\r\n<div className=\"sort-selection\">\r\n    <select value={sortOrder} onChange={(e) => handleSortOrderChange(e.target.value)}>\r\n        <option value=\"created_at\">Created at</option>\r\n        <option value=\"price\">Price</option>\r\n        <option value=\"name\">Name</option>\r\n    </select>\r\n</div>\r\n\r\n{/* Add Item Modal */}\r\n\r\n{showAddItemInput && (\r\n    <div className=\"edit-item-modal\">\r\n        <div className=\"modal-overlay\" onClick={() => setShowAddItemInput(false)}></div>\r\n        <div className=\"edit-item-form\">\r\n            <h3>Add Item</h3>\r\n\r\n            <form onSubmit={(e) => {\r\n                e.preventDefault();\r\n                handleAddItem();\r\n            }}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"new-item-name\">Item Name</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"new-item-name\"\r\n                        value={newItemName}\r\n                        onChange={(e) => setNewItemName(e.target.value)}\r\n                    />\r\n                    {itemNameError && <div className=\"error-message\">{itemNameError}</div>}\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"new-item-price\">Price</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"new-item-price\"\r\n                        value={newItemPrice}\r\n                        onChange={(e) => setNewItemPrice(e.target.value)}\r\n                    />\r\n                    {itemPriceError && <div className=\"error-message\">{itemPriceError}</div>}\r\n                </div>\r\n                <div className=\"form-group\">\r\n    <label htmlFor=\"newItemQuantity\">Quantity</label>\r\n    <input\r\n        type=\"number\"\r\n        id=\"newItemQuantity\"\r\n        value={newItemQuantity}\r\n        onChange={(e) => setNewItemQuantity(e.target.value)}\r\n    />\r\n    {itemQuantityError && <div className=\"error-message\">{itemQuantityError}</div>}\r\n</div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"newItemDiscount\">Discount</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"newItemDiscount\"\r\n                        value={newItemDiscount}\r\n                        onChange={(e) => {\r\n                            const discountValue = e.target.value;\r\n                            setNewItemDiscount(discountValue);\r\n                            if (discountValue === '') {\r\n                                setNewItemDiscountDays(''); // Reset discount days if discount is removed\r\n                            }\r\n                        }}\r\n                    />\r\n                    {itemDiscountError && <div className=\"error-message\">{itemDiscountError}</div>}\r\n                </div>\r\n\r\n                {newItemDiscount > 0 && (\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"newItemDiscountDays\">Discount Expiration (days)</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            id=\"newItemDiscountDays\"\r\n                            value={newItemDiscountDays}\r\n                            onChange={(e) => setNewItemDiscountDays(e.target.value)}\r\n                        />\r\n                        {itemDiscountDaysError && <div className=\"error-message\">{itemDiscountDaysError}</div>}\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"new-item-image\">Image</label>\r\n                    <input\r\n                        type=\"file\"\r\n                        ref={imageRef}\r\n                        onChange={handleImageClick}\r\n                        style={{ display: 'none' }}\r\n                    />\r\n                    <div className=\"profile-image-container\" onClick={() => imageRef.current?.click()}>\r\n                        <img\r\n                            src={preview || defaultImage}\r\n                            alt=\"Preview\"\r\n                            className=\"profile-image\"\r\n                            onError={handleImageError}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"submit\">ADD</button>\r\n                <button type=\"button\" onClick={() => setShowAddItemInput(false)}>Cancel</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n)}\r\n\r\n\r\n{/* Search Input */}\r\n<div className=\"custom-search-container\">\r\n    <input\r\n        type=\"text\"\r\n        value={searchTerm}\r\n        onChange={handleSearchChange}\r\n        placeholder=\"Search items...\"\r\n        className=\"custom-search-input\"\r\n    />\r\n</div>\r\n\r\n{/* Items List */}\r\n{(userRole === '1' || (userRole === '2' && isCurrentUserAdmin)) && (\r\n    <div className=\"add-buttons\">\r\n        <button onClick={() => setShowAddItemInput(true)}>Add Item</button>\r\n    </div>\r\n)}\r\n<div className=\"items-section card items-transition\" id=\"items-section\">\r\n    <h2 className=\"section-title\">Items</h2>\r\n    <TransitionGroup className=\"items-list\">\r\n    {filteredItems.map((item, index) => (\r\n  <CSSTransition\r\n    key={item.id}\r\n    classNames=\"items-transition\"\r\n    timeout={500}\r\n  >\r\n    <div className=\"item-card\" ref={index === 0 ? firstItemRef : null}>\r\n      <div className=\"item-image-container\">\r\n        <img\r\n          src={item.img || defaultImage}\r\n          alt={item.name}\r\n          className=\"item-image\"\r\n          onError={handleImageError}\r\n        />\r\n      </div>\r\n      <h3 className=\"item-name\">{item.name}</h3>\r\n      \r\n      {item.discount > 0 ? (\r\n        <>\r\n          <p className=\"original-price\">Price: ${item.price.toFixed(2)}</p>\r\n          <p className=\"discounted-price\">Discounted Price: ${item.discount.toFixed(2)}</p>\r\n        </>\r\n      ) : (\r\n        <p className=\"item-price\">Price: ${item.price.toFixed(2)}</p>\r\n      \r\n      )}\r\n <p className=\"item-quantity\">Quantity: {item.quantity}</p>\r\n {item.quantity === 0 ? (\r\n  <p className=\"out-of-stock\">Out of Stock</p>\r\n) : (\r\n  userRole === '3' && (\r\n    <div className=\"quantity-input\">\r\n    <button onClick={() => handleQuantityChange(item.id, -1)}>-</button>\r\n    <span>{itemQuantities[item.id] || 1}</span>\r\n    <button onClick={() => handleQuantityChange(item.id, 1)}>+</button>\r\n    <div>\r\n      <button onClick={() => handleAddToCart(item)}>Add to cart</button>\r\n      {Addloading[item.id] && <div className=\"spinner\"></div>}\r\n\r\n    </div>\r\n  </div>\r\n  )\r\n)}\r\n      <div className=\"edit-remove-row\">\r\n        \r\n        {(userRole === '1' || (userRole === '2' && isCurrentUserAdmin)) && (\r\n          <div className=\"item-actions\">\r\n            <button onClick={() => handleEditItem(item)}>Edit</button>\r\n            <button onClick={() => handleRemoveItem(item.id)}>Remove</button>\r\n          </div>\r\n        )}\r\n                  {(userRole === '1' || (userRole === '2' && isCurrentUserAdmin)) && (\r\n\r\n<button onClick={() => {\r\nsetEditItemQuantity(item.quantity);\r\nsetEditingItemId(item.id);\r\nsetIsEditingQuantity(true);\r\n}}>\r\nEdit Quantity\r\n            \r\n</button>\r\n            )}\r\n        <div className=\"discount-actions\">\r\n          {(userRole === '1' || (userRole === '2' && isCurrentUserAdmin)) && (\r\n            <>\r\n              <button onClick={() => {\r\n                setEditItemDiscount(item.discount);\r\n                setEditItemDiscountDays(item.discountDays || '');\r\n                setOriginalDiscount(item.discount);\r\n                setEditingItemId(item.id);\r\n                openEditDiscountForm();                \r\n              }}>\r\n                Add Discount\r\n              </button>\r\n              <button type=\"button\" onClick={() => handleRemoveDiscount(item.id)}>\r\n                Remove Discount\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n      \r\n      </div>\r\n      {itemMessages[item.id] && (\r\n        <div className=\"item-message\">\r\n          {itemMessages[item.id]}\r\n        </div>\r\n      )}\r\n    </div>\r\n  </CSSTransition>\r\n))}\r\n\r\n<div\r\n  className={`success-message ${!successMessage ? 'success-message-hidden' : ''}`}\r\n  onAnimationEnd={handleAnimationEnd}\r\n>\r\n  {successMessage}\r\n</div>\r\n    </TransitionGroup>\r\n</div>\r\n\r\n{error && error.includes('item') && (\r\n    <div className=\"error-message\">{error}</div>\r\n)}\r\n{/* Full-Screen Edit Form */}\r\n{isEditingItem && (\r\n    <div className=\"edit-item-modal\">\r\n        <div className=\"modal-overlay\" onClick={() => setIsEditingItem(false)}></div>\r\n        <div className=\"edit-item-form\">\r\n            <h3>Edit Item</h3>\r\n            <form onSubmit={(e) => { e.preventDefault(); handleUpdateItem(); }}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"name\">Name</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"name\"\r\n                        value={editItemName}\r\n                        onChange={(e) => setEditItemName(e.target.value)}\r\n                    />\r\n                    {itemNameError && <div className=\"error-message\">{itemNameError}</div>}\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"price\">Price</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"price\"\r\n                        value={editItemPrice}\r\n                        onChange={(e) => setEditItemPrice(e.target.value)}\r\n                    />\r\n                    {itemPriceError && <div className=\"error-message\">{itemPriceError}</div>}\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"editItemQuantity\">Quantity</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"editItemQuantity\"\r\n                        value={editItemQuantity}\r\n                        onChange={(e) => setEditItemQuantity(e.target.value)}\r\n                    />\r\n                    {itemQuantityError && <div className=\"error-message\">{itemQuantityError}</div>}\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"discount\">Discount</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"discount\"\r\n                        value={editItemDiscount}\r\n                        onChange={(e) => setEditItemDiscount(e.target.value)}\r\n                    />\r\n                    {itemDiscountError && <div className=\"error-message\">{itemDiscountError}</div>}\r\n                </div>\r\n                {editItemDiscount > 0 && (\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"discountDays\">Discount Expiration (days)</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            id=\"discountDays\"\r\n                            value={editItemDiscountDays}\r\n                            onChange={(e) => setEditItemDiscountDays(e.target.value)}\r\n                        />\r\n                        {itemDiscountDaysError && <div className=\"error-message\">{itemDiscountDaysError}</div>}\r\n                    </div>\r\n                )}\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"image\">Image</label>\r\n                    <input\r\n                        type=\"file\"\r\n                        ref={imageRef}\r\n                        onChange={handleImageClick}\r\n                        style={{ display: 'none' }}\r\n                    />\r\n                    <div className=\"profile-image-container\" onClick={() => imageRef.current?.click()}>\r\n                        <img\r\n                            src={preview || editItemImage || defaultImage}\r\n                            alt=\"Preview\"\r\n                            className=\"profile-image\"\r\n                            onError={handleImageError}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <button type=\"submit\">Save Changes</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n)}\r\n\r\n{/*Editing Quantity*/}\r\n{isEditingQuantity && (\r\n    <div className=\"edit-quantity-modal\">\r\n        <div className=\"modal-overlay\" onClick={() => setIsEditingQuantity(false)}></div>\r\n        <div className=\"edit-quantity-form\">\r\n            <h3>Edit Quantity</h3>\r\n            <form onSubmit={(e) => { e.preventDefault(); handleUpdateQuantity(); }}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"quantity\">Quantity</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"quantity\"\r\n                        value={editItemQuantity}\r\n                        onChange={(e) => setEditItemQuantity(e.target.value)}\r\n                    />\r\n                    {itemQuantityError && <div className=\"error-message\">{itemQuantityError}</div>}\r\n                </div>\r\n                <button type=\"submit\">Save Changes</button>\r\n                <button type=\"button\" onClick={() => setIsEditingQuantity(false)}>Cancel</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n)}\r\n{/* Full-Screen Discount Edit Modal */}\r\n{isEditingDiscount && (\r\n    <div className=\"edit-discount-modal\">\r\n        <div className=\"modal-overlay\" onClick={() => setIsEditingDiscount(false)}></div>\r\n        <div className=\"edit-discount-form\">\r\n            <h3>Edit Discount</h3>\r\n            <form onSubmit={(e) => { e.preventDefault(); handleUpdateDiscount(); }}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"discount\">Discount</label>\r\n                    <input\r\n                        type=\"number\"\r\n                        id=\"discount\"\r\n                        value={editItemDiscount}\r\n                        onChange={(e) => {\r\n                            const discountValue = e.target.value;\r\n                            setEditItemDiscount(discountValue);\r\n                            if (discountValue === '') {\r\n                                setEditItemDiscountDays(0); // Reset discount days if discount is removed\r\n                            }\r\n                        }}\r\n                    />\r\n                            {itemDiscountError && <div className=\"error-message\">{itemDiscountError}</div>}\r\n                            </div>\r\n                {editItemDiscount > 0 && (\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"discountDays\">Discount Expiration (days)</label>\r\n                        <input\r\n                            type=\"number\"\r\n                            id=\"discountDays\"\r\n                            value={editItemDiscountDays}\r\n                            onChange={(e) => setEditItemDiscountDays(e.target.value)}\r\n                        />\r\n                        {itemDiscountDaysError && <div className=\"error-message\">{itemDiscountDaysError}</div>}\r\n                    </div>\r\n                )}\r\n                <button type=\"submit\">Save Changes</button>\r\n                <button type=\"button\" onClick={() => setIsEditingDiscount(false)}>Cancel</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n)}\r\n\r\n\r\n\r\n  {/* Pagination Controls */}\r\n<div className=\"pagination\">\r\n  <button onClick={handlePreviousPage}>Previous</button>\r\n  {pages.map((page) => (\r\n    <button\r\n      key={page}\r\n      onClick={() => setCurrentPage(page)}\r\n      className={currentPage === page ? 'active' : ''}\r\n    >\r\n      {page}\r\n    </button>\r\n  ))}\r\n  {endPage < totalPages && (\r\n    <button onClick={() => setCurrentPage(endPage + 1)}>...</button>\r\n  )}\r\n  <button onClick={handleNextPage}>Next</button>\r\n</div>\r\n{/* Admins Section */}\r\n{(userRole === '1' || (userRole === '2' && isCurrentUserAdmin)) && (\r\n  <div className=\"admins-section card\">\r\n    <h2 className=\"section-title\">Admins</h2>\r\n    <div className=\"add-admin-container\">\r\n      <input\r\n        type=\"email\"\r\n        value={newAdminEmail}\r\n        onChange={(e) => setNewAdminEmail(e.target.value)}\r\n        placeholder=\"Admin email\"\r\n        className=\"admin-input\"\r\n      />\r\n      <button onClick={handleAddAdmin} className=\"admin-button\">Add Admin</button>\r\n    </div>\r\n    <ul className=\"admins-list\">\r\n      {admins.map((admin) => (\r\n        <li key={admin.user_id} className=\"admin-item\">\r\n          <span>{admin.email}</span>\r\n          <button onClick={() => handleRemoveAdmin(admin.user_id)}>Remove</button>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n    {error && (\r\n            <div className=\"error-message\">{error}</div>\r\n          )}\r\n  </div>\r\n)}\r\n      {loading && <div className=\"spinner\"></div>}\r\n</div>\r\n        </div>\r\n      </div>\r\n\r\n);\r\n}\r\n\r\nexport default VendorDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}