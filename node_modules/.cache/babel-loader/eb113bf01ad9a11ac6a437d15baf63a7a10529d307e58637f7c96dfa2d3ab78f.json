{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import'../css/vendor.css';import defaultImage from'./vendor.jpg';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Vendors(){const[vendors,setVendors]=useState([]);const[filteredVendors,setFilteredVendors]=useState([]);const[error,setError]=useState(null);const[page,setPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[loading,setLoading]=useState(false);const[isAdmin,setIsAdmin]=useState(false);const[userVendorIds,setUserVendorIds]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[sortOrder,setSortOrder]=useState('latest');const[showDropdown,setShowDropdown]=useState(false);const[userData]=useState(null);const navigate=useNavigate();const[showSearchInput]=useState(false);const itemsPerPage=12;const visiblePages=4;// Fetch vendors\nuseEffect(()=>{const fetchVendors=async()=>{setLoading(true);const token=localStorage.getItem('token');try{const response=await fetch(`https://backend-934694036821.europe-west1.run.app/vendors?page=${page}&pageSize=${itemsPerPage}&sort=${sortOrder}`,{headers:{Authorization:`Bearer ${token}`}});if(!response.ok){if(response.status===401){navigate('/signin',{replace:true});setError('Unauthorized. Please sign in.');}throw new Error(`Error! Status: ${response.status}`);}const data=await response.json();if(data&&data.Vendors){let vendorsList=data.Vendors;if(userVendorIds.length>0&&!isAdmin){vendorsList=vendorsList.filter(vendor=>userVendorIds.includes(vendor.id));}else if(userVendorIds.length>0){vendorsList.sort((a,b)=>{const isAUserVendor=userVendorIds.includes(a.id);const isBUserVendor=userVendorIds.includes(b.id);if(isAUserVendor&&!isBUserVendor)return-1;if(!isAUserVendor&&isBUserVendor)return 1;return 0;});}setVendors(vendorsList);setFilteredVendors(vendorsList);setTotalPages(Math.ceil(data.TotalCount/itemsPerPage));}}catch(error){console.error('Error fetching vendors:',error);setError('Failed to load vendors');}setLoading(false);};fetchVendors();},[page,sortOrder,userVendorIds,isAdmin,navigate]);// Fetch user data\nuseEffect(()=>{const fetchUser=async()=>{const token=localStorage.getItem('token');if(!token){setIsAdmin(false);setUserVendorIds([]);return;}try{const response=await fetch('https://backend-934694036821.europe-west1.run.app/me',{headers:{Authorization:`Bearer ${token}`}});if(!response.ok){if(response.status===401){setError('Unauthorized. Please sign in.');setIsAdmin(false);setUserVendorIds([]);}throw new Error(`Error! Status: ${response.status}`);}const userData=await response.json();if(userData&&userData.me){setIsAdmin(userData.me.user_role===\"1\");if(userData.me.user_role===\"2\"){try{const vendorResponse=await fetch(`https://backend-934694036821.europe-west1.run.app/uservendors/${userData.me.user_info.id}`,{headers:{Authorization:`Bearer ${token}`}});const vendorData=await vendorResponse.json();if(vendorData&&vendorData.vendor&&vendorData.vendor.length>0){setUserVendorIds(vendorData.vendor.map(v=>v.id));}else{setUserVendorIds([]);}}catch(error){setError('Failed to load vendor data');}}}else{setError('User data is missing or incomplete.');}}catch(error){setError('Failed to load user data');}};fetchUser();},[navigate]);const handlePageChange=newPage=>{if(newPage>0&&newPage<=totalPages){setPage(newPage);}};const handleEditClick=vendorId=>{if(isAdmin||userVendorIds.length>0&&userVendorIds.includes(vendorId)){navigate(`/edit-vendor/${vendorId}`);}else{console.log('Non-admin user cannot edit vendors');}};const handleSearchChange=event=>{const searchValue=event.target.value;setSearchTerm(searchValue);if(searchValue){const results=vendors.filter(vendor=>vendor.name.toLowerCase().includes(searchValue.toLowerCase()));setFilteredVendors(results);setShowDropdown(true);}else{setFilteredVendors([]);setShowDropdown(false);}};const handleSortChange=event=>{setSortOrder(event.target.value);};const handleSelectVendor=vendorId=>{setSearchTerm('');setShowDropdown(false);navigate(`/vendor/${vendorId}`);};const handleImageError=e=>{e.target.src=defaultImage;};const handleAddVendorClick=()=>{navigate('/add-vendor');};const handleVisitClick=vendorId=>{navigate(`/vendor/${vendorId}`);};if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error});}const currentPage=page;const startPage=Math.max(1,currentPage-visiblePages+1);const endPage=Math.min(totalPages,currentPage+visiblePages-1);const pages=[];for(let i=startPage;i<=endPage;i++){pages.push(i);}return/*#__PURE__*/_jsx(\"div\",{className:\"page-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-list\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"vendor-grid\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Vendors\"}),/*#__PURE__*/_jsxs(\"div\",{className:`search-input-container ${showSearchInput?'show':''}`,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"search-input\",placeholder:\"Search vendors...\",value:searchTerm,onChange:handleSearchChange,onFocus:()=>searchTerm&&setShowDropdown(true),onBlur:()=>setTimeout(()=>setShowDropdown(false),200)}),showDropdown&&searchTerm&&filteredVendors.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"dropdown-menu\",children:filteredVendors.map(vendor=>/*#__PURE__*/_jsxs(\"li\",{onClick:()=>handleSelectVendor(vendor.id),className:\"dropdown-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:vendor.img||defaultImage,alt:vendor.name,className:\"vendor-logo\",onError:handleImageError}),/*#__PURE__*/_jsx(\"span\",{className:\"vendor-name\",children:vendor.name})]},vendor.id))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sort-selection\",children:/*#__PURE__*/_jsxs(\"select\",{value:sortOrder,onChange:handleSortChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"latest\",children:\"Latest\"}),/*#__PURE__*/_jsx(\"option\",{value:\"name_asc\",children:\"Name Ascending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"name_desc\",children:\"Name Descending\"})]})}),isAdmin&&/*#__PURE__*/_jsx(\"button\",{className:\"add-vendor-button\",onClick:handleAddVendorClick,children:\"Add Vendor\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"vendor-cards\",children:vendors.length>0?vendors.map(vendor=>/*#__PURE__*/_jsx(\"li\",{className:\"vendor-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:vendor.img||defaultImage,alt:vendor.name,className:\"vendor-logo\",onError:handleImageError}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-content\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"vendor-name\",children:vendor.name}),/*#__PURE__*/_jsx(\"p\",{className:\"vendor-description\",children:vendor.description||'No description available'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVisitClick(vendor.id),children:\"Visit\"}),(isAdmin||userVendorIds&&vendor.id===userVendorIds&&userData)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditClick(vendor.id),children:\"Edit\"})]})]})},vendor.id)):/*#__PURE__*/_jsx(\"li\",{children:\"No vendors found\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(page-1),disabled:page===1||loading,children:\"Previous\"}),pages.map(page=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(page),className:currentPage===page?'active':'',children:page},page)),endPage<totalPages&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(endPage+1),children:\"...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(page+1),disabled:page===totalPages||loading,children:\"Next\"}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})]})]})});}export default Vendors;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","defaultImage","jsx","_jsx","jsxs","_jsxs","Vendors","vendors","setVendors","filteredVendors","setFilteredVendors","error","setError","page","setPage","totalPages","setTotalPages","loading","setLoading","isAdmin","setIsAdmin","userVendorIds","setUserVendorIds","searchTerm","setSearchTerm","sortOrder","setSortOrder","showDropdown","setShowDropdown","userData","navigate","showSearchInput","itemsPerPage","visiblePages","fetchVendors","token","localStorage","getItem","response","fetch","headers","Authorization","ok","status","replace","Error","data","json","vendorsList","length","filter","vendor","includes","id","sort","a","b","isAUserVendor","isBUserVendor","Math","ceil","TotalCount","console","fetchUser","me","user_role","vendorResponse","user_info","vendorData","map","v","handlePageChange","newPage","handleEditClick","vendorId","log","handleSearchChange","event","searchValue","target","value","results","name","toLowerCase","handleSortChange","handleSelectVendor","handleImageError","e","src","handleAddVendorClick","handleVisitClick","className","children","currentPage","startPage","max","endPage","min","pages","i","push","type","placeholder","onChange","onFocus","onBlur","setTimeout","onClick","img","alt","onError","description","disabled"],"sources":["C:/Users/oG_Ju/OneDrive/Desktop/SadeemVendorapp/frontend/src/components/vendors.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../css/vendor.css';\r\nimport defaultImage from './vendor.jpg';\r\n\r\nfunction Vendors() {\r\n  const [vendors, setVendors] = useState([]);\r\n  const [filteredVendors, setFilteredVendors] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [page, setPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [userVendorIds, setUserVendorIds] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [sortOrder, setSortOrder] = useState('latest');\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n  const [userData] = useState(null);\r\n  const navigate = useNavigate();\r\n  const [showSearchInput] = useState(false);\r\n  const itemsPerPage = 12;\r\n  const visiblePages = 4;\r\n\r\n  // Fetch vendors\r\n  useEffect(() => {\r\n    const fetchVendors = async () => {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      try {\r\n        const response = await fetch(`https://backend-934694036821.europe-west1.run.app/vendors?page=${page}&pageSize=${itemsPerPage}&sort=${sortOrder}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        if (!response.ok) {\r\n          if (response.status === 401) {\r\n            navigate('/signin', { replace: true });\r\n            setError('Unauthorized. Please sign in.');\r\n          }\r\n          throw new Error(`Error! Status: ${response.status}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n\r\n        if (data && data.Vendors) {\r\n          let vendorsList = data.Vendors;\r\n\r\n          if (userVendorIds.length > 0 && !isAdmin) {\r\n            vendorsList = vendorsList.filter(vendor => userVendorIds.includes(vendor.id));\r\n          } else if (userVendorIds.length > 0) {\r\n            vendorsList.sort((a, b) => {\r\n              const isAUserVendor = userVendorIds.includes(a.id);\r\n              const isBUserVendor = userVendorIds.includes(b.id);\r\n              if (isAUserVendor && !isBUserVendor) return -1;\r\n              if (!isAUserVendor && isBUserVendor) return 1;\r\n              return 0;\r\n            });\r\n          }\r\n\r\n          setVendors(vendorsList);\r\n          setFilteredVendors(vendorsList);\r\n          setTotalPages(Math.ceil(data.TotalCount / itemsPerPage));\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching vendors:', error);\r\n        setError('Failed to load vendors');\r\n      }\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchVendors();\r\n  }, [page, sortOrder, userVendorIds, isAdmin, navigate]);\r\n\r\n  // Fetch user data\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        setIsAdmin(false);\r\n        setUserVendorIds([]);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await fetch('https://backend-934694036821.europe-west1.run.app/me', {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        if (!response.ok) {\r\n          if (response.status === 401) {\r\n            setError('Unauthorized. Please sign in.');\r\n            setIsAdmin(false);\r\n            setUserVendorIds([]);\r\n          }\r\n          throw new Error(`Error! Status: ${response.status}`);\r\n        }\r\n\r\n        const userData = await response.json();\r\n        if (userData && userData.me) {\r\n          setIsAdmin(userData.me.user_role === \"1\");\r\n\r\n          if (userData.me.user_role === \"2\") {\r\n            try {\r\n              const vendorResponse = await fetch(`https://backend-934694036821.europe-west1.run.app/uservendors/${userData.me.user_info.id}`, {\r\n                headers: {\r\n                  Authorization: `Bearer ${token}`,\r\n                },\r\n              });\r\n              const vendorData = await vendorResponse.json();\r\n              if (vendorData && vendorData.vendor && vendorData.vendor.length > 0) {\r\n                setUserVendorIds(vendorData.vendor.map(v => v.id));\r\n              } else {\r\n                setUserVendorIds([]);\r\n              }\r\n            } catch (error) {\r\n              setError('Failed to load vendor data');\r\n            }\r\n          }\r\n        } else {\r\n          setError('User data is missing or incomplete.');\r\n        }\r\n      } catch (error) {\r\n        setError('Failed to load user data');\r\n      }\r\n    };\r\n\r\n    fetchUser();\r\n  }, [navigate]);\r\n\r\n  const handlePageChange = (newPage) => {\r\n    if (newPage > 0 && newPage <= totalPages) {\r\n      setPage(newPage);\r\n    }\r\n  };\r\n\r\n  const handleEditClick = (vendorId) => {\r\n    if (isAdmin || (userVendorIds.length > 0 && userVendorIds.includes(vendorId))) {\r\n      navigate(`/edit-vendor/${vendorId}`);\r\n    } else {\r\n      console.log('Non-admin user cannot edit vendors');\r\n    }\r\n  };\r\n\r\n  const handleSearchChange = (event) => {\r\n    const searchValue = event.target.value;\r\n    setSearchTerm(searchValue);\r\n\r\n    if (searchValue) {\r\n      const results = vendors.filter(vendor => vendor.name.toLowerCase().includes(searchValue.toLowerCase()));\r\n      setFilteredVendors(results);\r\n      setShowDropdown(true);\r\n    } else {\r\n      setFilteredVendors([]);\r\n      setShowDropdown(false);\r\n    }\r\n  };\r\n\r\n  const handleSortChange = (event) => {\r\n    setSortOrder(event.target.value);\r\n  };\r\n\r\n  const handleSelectVendor = (vendorId) => {\r\n    setSearchTerm('');\r\n    setShowDropdown(false);\r\n    navigate(`/vendor/${vendorId}`);\r\n  };\r\n\r\n  const handleImageError = (e) => {\r\n    e.target.src = defaultImage;\r\n  };\r\n\r\n  const handleAddVendorClick = () => {\r\n    navigate('/add-vendor');\r\n  };\r\n\r\n  const handleVisitClick = (vendorId) => {\r\n    navigate(`/vendor/${vendorId}`);\r\n  };\r\n\r\n  if (error) {\r\n    return <div className=\"error-message\">{error}</div>;\r\n  }\r\n\r\n  const currentPage = page;\r\n  const startPage = Math.max(1, currentPage - visiblePages + 1);\r\n  const endPage = Math.min(totalPages, currentPage + visiblePages - 1);\r\n\r\n  const pages = [];\r\n  for (let i = startPage; i <= endPage; i++) {\r\n    pages.push(i);\r\n  }\r\n\r\n  return (\r\n    <div className=\"page-container\">\r\n      <div className=\"vendor-list\">\r\n        <ul className=\"vendor-grid\">\r\n          <h1 className=\"title\">Vendors</h1>\r\n\r\n          <div className={`search-input-container ${showSearchInput ? 'show' : ''}`}>\r\n            <input\r\n              type=\"text\"\r\n              className=\"search-input\"\r\n              placeholder=\"Search vendors...\"\r\n              value={searchTerm}\r\n              onChange={handleSearchChange}\r\n              onFocus={() => searchTerm && setShowDropdown(true)}\r\n              onBlur={() => setTimeout(() => setShowDropdown(false), 200)}\r\n            />\r\n\r\n            {showDropdown && searchTerm && filteredVendors.length > 0 && (\r\n              <ul className=\"dropdown-menu\">\r\n                {filteredVendors.map((vendor) => (\r\n                  <li\r\n                    key={vendor.id}\r\n                    onClick={() => handleSelectVendor(vendor.id)}\r\n                    className=\"dropdown-item\"\r\n                  >\r\n                    <img\r\n                      src={vendor.img || defaultImage}\r\n                      alt={vendor.name}\r\n                      className=\"vendor-logo\"\r\n                      onError={handleImageError}\r\n                    />\r\n                    <span className=\"vendor-name\">{vendor.name}</span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n        </ul>\r\n\r\n        <div className=\"sort-selection\">\r\n          <select value={sortOrder} onChange={handleSortChange}>\r\n            <option value=\"latest\">Latest</option>\r\n            <option value=\"name_asc\">Name Ascending</option>\r\n            <option value=\"name_desc\">Name Descending</option>\r\n          </select>\r\n        </div>\r\n\r\n        {isAdmin && (\r\n          <button className=\"add-vendor-button\" onClick={handleAddVendorClick}>\r\n            Add Vendor\r\n          </button>\r\n        )}\r\n\r\n        <ul className=\"vendor-cards\">\r\n          {vendors.length > 0 ? (\r\n            vendors.map((vendor) => (\r\n              <li key={vendor.id} className=\"vendor-card\">\r\n                <div className=\"vendor-header\">\r\n                  <img\r\n                    src={vendor.img || defaultImage}\r\n                    alt={vendor.name}\r\n                    className=\"vendor-logo\"\r\n                    onError={handleImageError}\r\n                  />\r\n                  <div className=\"vendor-content\">\r\n                    <h2 className=\"vendor-name\">{vendor.name}</h2>\r\n                    <p className=\"vendor-description\">{vendor.description || 'No description available'}</p>\r\n                    <button onClick={() => handleVisitClick(vendor.id)}>Visit</button>\r\n                    {(isAdmin || (userVendorIds && vendor.id === userVendorIds && userData)) && (\r\n                      <button onClick={() => handleEditClick(vendor.id)}>Edit</button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            ))\r\n          ) : (\r\n            <li>No vendors found</li>\r\n          )}\r\n        </ul>\r\n\r\n        <div className=\"pagination-controls\">\r\n          <button onClick={() => handlePageChange(page - 1)} disabled={page === 1 || loading}>\r\n            Previous\r\n          </button>\r\n          {pages.map((page) => (\r\n            <button\r\n              key={page}\r\n              onClick={() => handlePageChange(page)}\r\n              className={currentPage === page ? 'active' : ''}\r\n            >\r\n              {page}\r\n            </button>\r\n          ))}\r\n          {endPage < totalPages && <button onClick={() => handlePageChange(endPage + 1)}>...</button>}\r\n          <button onClick={() => handlePageChange(page + 1)} disabled={page === totalPages || loading}>\r\n            Next\r\n          </button>\r\n          {loading && <div className=\"spinner\"></div>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Vendors;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}