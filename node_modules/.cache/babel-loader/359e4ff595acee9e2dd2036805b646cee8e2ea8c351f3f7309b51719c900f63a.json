{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useNavigate}from'react-router-dom';import'../css/vendor.css';import defaultImage from'./vendor.jpg';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Vendors(){const[vendors,setVendors]=useState([]);const[filteredVendors,setFilteredVendors]=useState([]);const[error,setError]=useState(null);const[page,setPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[loading,setLoading]=useState(false);const[isAdmin,setIsAdmin]=useState(false);const[userVendorId,setUserVendorId]=useState(null);const[searchTerm,setSearchTerm]=useState('');const[sortOrder,setSortOrder]=useState('latest');const[showDropdown,setShowDropdown]=useState(false);const[showSearchInput]=useState(false);const[userData,setUserData]=useState(null);const navigate=useNavigate();const itemsPerPage=12;const visiblePages=4;// number of page numbers to display initially\nconst fetchVendors=useCallback(async page=>{setLoading(true);const token=localStorage.getItem('token');try{const response=await fetch(`https://backend-934694036821.europe-west1.run.app/vendors?page=${page}&pageSize=${itemsPerPage}&sort=${sortOrder}`,{headers:{Authorization:`Bearer ${token}`// Add token here\n}});if(!response.ok){const errorText=await response.text();console.error(`https error! Status: ${response.status}, Message: ${errorText}`);if(response.status===401){navigate('/signin',{replace:true});setError('Unauthorized. Please sign in.');}throw new Error(`https error! Status: ${response.status}`);}const data=await response.json();console.log(data.Vendors);if(data&&data.Vendors){let vendorsList=data.Vendors;// Filter vendors if the user is a vendor\nif(userVendorId&&!isAdmin){vendorsList=vendorsList.filter(vendor=>vendor.id===userVendorId);}else if(userVendorId){// If the user is an admin, prioritize user's vendor\nconst userVendorIndex=vendorsList.findIndex(vendor=>vendor.id===userVendorId);if(userVendorIndex!==-1){const[userVendor]=vendorsList.splice(userVendorIndex,1);vendorsList.unshift(userVendor);}}setVendors(vendorsList);setFilteredVendors(vendorsList);setTotalPages(Math.ceil(data.TotalCount/itemsPerPage));}else{console.log('No vendors data found');}}catch(error){navigate('/signin',{replace:true});// Navigate to sign-in page on error\nconsole.error('Error fetching vendors:',error);setError('Failed to load vendors');}setLoading(false);},[sortOrder,userVendorId,isAdmin,navigate]);const fetchUser=useCallback(async()=>{const token=localStorage.getItem('token');if(!token){console.warn('No token found in localStorage');// Handle cases with no token, such as setting defaults\nsetIsAdmin(false);setUserVendorId(null);return;}try{const response=await fetch('https://backend-934694036821.europe-west1.run.app/me',{headers:{Authorization:`Bearer ${token}`}});if(!response.ok){console.error(`https error! Status: ${response.status}`);if(response.status===401){setError('Unauthorized. Please sign in.');setIsAdmin(false);setUserVendorId(null);}throw new Error(`https error! Status: ${response.status}`);}const userData=await response.json();setUserData(userData);// Store userData in state\nconsole.log(userData);// Add this line to console.log the userData state\nconsole.log(userData.me);if(userData&&userData.me){setIsAdmin(userData.me.user_role===\"1\");if(userData.me.user_role===\"2\"){try{const vendorResponse=await fetch(`https://backend-934694036821.europe-west1.run.app/uservendors/${userData.me.user_info.id}`,{headers:{Authorization:`Bearer ${token}`}});const vendorData=await vendorResponse.json();console.log('Vendor Data:',vendorData);// Debug vendor data\nif(vendorData){if(vendorData.vendor&&vendorData.vendor.length>0){setUserVendorId(vendorData.vendor[0].id);// Ensure you are setting the ID correctly\n}else{console.log('No vendor data found or vendor array is empty');}}else{console.log('No vendor data found');}}catch(error){console.error('Error fetching vendor data:',error);setError('Failed to load vendor data');}}}else{console.log('No user data found');setError('User data is missing or incomplete.');}}catch(error){console.error('Error fetching user data:',error);setError('Failed to load user data');}},[]);useEffect(()=>{fetchVendors(page);fetchUser();},[fetchVendors,fetchUser,page]);const handlePageChange=newPage=>{if(newPage>0&&newPage<=totalPages){setPage(newPage);}};const handleEditClick=vendorId=>{if(isAdmin||userVendorId&&vendorId===userVendorId){navigate(`/edit-vendor/${vendorId}`);}else{console.log('Non-admin user cannot edit vendors');}};const handleSearchChange=event=>{const searchValue=event.target.value;setSearchTerm(searchValue);if(searchValue){const results=vendors.filter(vendor=>vendor.name.toLowerCase().includes(searchValue.toLowerCase()));setFilteredVendors(results);setShowDropdown(true);}else{setFilteredVendors([]);// Hide dropdown when search term is empty\nsetShowDropdown(false);}};const handleSortChange=event=>{setSortOrder(event.target.value);};const handleSelectVendor=vendorId=>{setSearchTerm('');setShowDropdown(false);navigate(`/vendor/${vendorId}`);};const handleImageError=e=>{e.target.src=defaultImage;};const handleAddVendorClick=()=>{navigate('/add-vendor');};const handleVisitClick=vendorId=>{navigate(`/vendor/${vendorId}`);};if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error});}const currentPage=page;// use the currentPage state\nconst startPage=Math.max(1,currentPage-visiblePages+1);const endPage=Math.min(totalPages,currentPage+visiblePages-1);const pages=[];for(let i=startPage;i<=endPage;i++){pages.push(i);}return/*#__PURE__*/_jsx(\"div\",{className:\"page-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-list\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"vendor-grid\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Vendors\"}),/*#__PURE__*/_jsxs(\"div\",{className:`search-input-container ${showSearchInput?'show':''}`,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"search-input\",placeholder:\"Search vendors...\",value:searchTerm,onChange:handleSearchChange,onFocus:()=>searchTerm&&setShowDropdown(true),onBlur:()=>setTimeout(()=>setShowDropdown(false),200)}),showDropdown&&searchTerm&&filteredVendors.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"dropdown-menu\",children:filteredVendors.map(vendor=>/*#__PURE__*/_jsxs(\"li\",{onClick:()=>handleSelectVendor(vendor.id),className:\"dropdown-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:vendor.img||defaultImage,alt:vendor.name,className:\"vendor-logo\",onError:handleImageError// Handle image load error\n}),/*#__PURE__*/_jsx(\"span\",{className:\"vendor-name\",children:vendor.name})]},vendor.id))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sort-selection\",children:/*#__PURE__*/_jsxs(\"select\",{value:sortOrder,onChange:handleSortChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"latest\",children:\"Latest\"}),/*#__PURE__*/_jsx(\"option\",{value:\"name_asc\",children:\"Name Ascending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"name_desc\",children:\"Name Descending\"})]})}),isAdmin&&/*#__PURE__*/_jsx(\"button\",{className:\"add-vendor-button\",onClick:handleAddVendorClick,children:\"Add Vendor\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"vendor-cards\",children:vendors.length>0?vendors.map(vendor=>/*#__PURE__*/_jsx(\"li\",{className:\"vendor-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:vendor.img||defaultImage,alt:vendor.name,className:\"vendor-logo\",onError:handleImageError// Handle image load error\n}),/*#__PURE__*/_jsxs(\"div\",{className:\"vendor-content\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"vendor-name\",children:vendor.name}),/*#__PURE__*/_jsx(\"p\",{className:\"vendor-description\",children:vendor.description||'No description available'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVisitClick(vendor.id),children:\"Visit\"}),(isAdmin||userVendorId&&vendor.id===userVendorId&&userData)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditClick(vendor.id),children:\"Edit\"})]})]})},vendor.id)):/*#__PURE__*/_jsx(\"li\",{children:\"No vendors found\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(page-1),disabled:page===1||loading,children:\"Previous\"}),pages.map(page=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(page),className:currentPage===page?'active':'',children:page},page)),endPage<totalPages&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(endPage+1),children:\"...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(page+1),disabled:page===totalPages||loading,children:\"Next\"}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})]})]})});}export default Vendors;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","defaultImage","jsx","_jsx","jsxs","_jsxs","Vendors","vendors","setVendors","filteredVendors","setFilteredVendors","error","setError","page","setPage","totalPages","setTotalPages","loading","setLoading","isAdmin","setIsAdmin","userVendorId","setUserVendorId","searchTerm","setSearchTerm","sortOrder","setSortOrder","showDropdown","setShowDropdown","showSearchInput","userData","setUserData","navigate","itemsPerPage","visiblePages","fetchVendors","token","localStorage","getItem","response","fetch","headers","Authorization","ok","errorText","text","console","status","replace","Error","data","json","log","vendorsList","filter","vendor","id","userVendorIndex","findIndex","userVendor","splice","unshift","Math","ceil","TotalCount","fetchUser","warn","me","user_role","vendorResponse","user_info","vendorData","length","handlePageChange","newPage","handleEditClick","vendorId","handleSearchChange","event","searchValue","target","value","results","name","toLowerCase","includes","handleSortChange","handleSelectVendor","handleImageError","e","src","handleAddVendorClick","handleVisitClick","className","children","currentPage","startPage","max","endPage","min","pages","i","push","type","placeholder","onChange","onFocus","onBlur","setTimeout","map","onClick","img","alt","onError","description","disabled"],"sources":["C:/Users/oG_Ju/OneDrive/Desktop/SadeemVendorapp/frontend/src/components/vendors.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../css/vendor.css';\r\nimport defaultImage from './vendor.jpg';\r\n\r\nfunction Vendors() {\r\n  const [vendors, setVendors] = useState([]);\r\n  const [filteredVendors, setFilteredVendors] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [page, setPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [userVendorId, setUserVendorId] = useState(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [sortOrder, setSortOrder] = useState('latest');\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n  const [showSearchInput] = useState(false);\r\n  const [userData, setUserData] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  const itemsPerPage = 12;\r\n  const visiblePages = 4; // number of page numbers to display initially\r\n\r\n\r\n  const fetchVendors = useCallback(async (page) => {\r\n    setLoading(true);\r\n    const token = localStorage.getItem('token');\r\n    try {\r\n      const response = await fetch(`https://backend-934694036821.europe-west1.run.app/vendors?page=${page}&pageSize=${itemsPerPage}&sort=${sortOrder}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`, // Add token here\r\n        },\r\n      });\r\n  \r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        console.error(`https error! Status: ${response.status}, Message: ${errorText}`);\r\n        if (response.status === 401) {\r\n\r\n          navigate('/signin', { replace: true });\r\n\r\n          setError('Unauthorized. Please sign in.');\r\n        }\r\n        throw new Error(`https error! Status: ${response.status}`);\r\n      }\r\n  \r\n      const data = await response.json();\r\n      console.log(data.Vendors)\r\n\r\n      if (data && data.Vendors) {\r\n        let vendorsList = data.Vendors;\r\n  \r\n        // Filter vendors if the user is a vendor\r\n        if (userVendorId && !isAdmin) {\r\n          vendorsList = vendorsList.filter(vendor => vendor.id === userVendorId);\r\n        } else if (userVendorId) {\r\n          // If the user is an admin, prioritize user's vendor\r\n          const userVendorIndex = vendorsList.findIndex(vendor => vendor.id === userVendorId);\r\n          if (userVendorIndex !== -1) {\r\n            const [userVendor] = vendorsList.splice(userVendorIndex, 1);\r\n            vendorsList.unshift(userVendor);\r\n          }\r\n        }\r\n  \r\n        setVendors(vendorsList);\r\n        setFilteredVendors(vendorsList);\r\n        setTotalPages(Math.ceil(data.TotalCount / itemsPerPage));\r\n      } else {\r\n        console.log('No vendors data found');\r\n      }\r\n    } catch (error) {\r\n      navigate('/signin', { replace: true }); // Navigate to sign-in page on error\r\n\r\n      console.error('Error fetching vendors:', error);\r\n      setError('Failed to load vendors');\r\n    }\r\n    setLoading(false);\r\n}, [sortOrder, userVendorId, isAdmin, navigate]);\r\n  const fetchUser = useCallback(async () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      console.warn('No token found in localStorage');\r\n      // Handle cases with no token, such as setting defaults\r\n      setIsAdmin(false);\r\n      setUserVendorId(null);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const response = await fetch('https://backend-934694036821.europe-west1.run.app/me', {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      if (!response.ok) {\r\n        console.error(`https error! Status: ${response.status}`);\r\n        if (response.status === 401) {\r\n          setError('Unauthorized. Please sign in.');\r\n          setIsAdmin(false);\r\n          setUserVendorId(null);\r\n        }\r\n        throw new Error(`https error! Status: ${response.status}`);\r\n      }\r\n      \r\n      const userData = await response.json();\r\n      setUserData(userData); // Store userData in state\r\n\r\n      console.log(userData); // Add this line to console.log the userData state\r\n      console.log(userData.me);\r\n      if (userData && userData.me) {\r\n        setIsAdmin(userData.me.user_role === \"1\");\r\n        \r\n        if (userData.me.user_role === \"2\") {\r\n          try {\r\n            const vendorResponse = await fetch(`https://backend-934694036821.europe-west1.run.app/uservendors/${userData.me.user_info.id}`, {\r\n              headers: {\r\n                Authorization: `Bearer ${token}`,\r\n              },\r\n            });\r\n            const vendorData = await vendorResponse.json();\r\n            console.log('Vendor Data:', vendorData); // Debug vendor data\r\n            \r\n            if (vendorData) {\r\n              if (vendorData.vendor && vendorData.vendor.length > 0) {\r\n                setUserVendorId(vendorData.vendor[0].id); // Ensure you are setting the ID correctly\r\n              } else {\r\n                console.log('No vendor data found or vendor array is empty');\r\n              }\r\n            } else {\r\n              console.log('No vendor data found');\r\n            }\r\n          } catch (error) {\r\n            console.error('Error fetching vendor data:', error);\r\n            setError('Failed to load vendor data');\r\n          }\r\n        }\r\n      } else {\r\n        console.log('No user data found');\r\n        setError('User data is missing or incomplete.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching user data:', error);\r\n      setError('Failed to load user data');\r\n    }\r\n  }, []);\r\n  \r\n\r\n  useEffect(() => {\r\n    fetchVendors(page);\r\n    fetchUser();\r\n  }, [fetchVendors, fetchUser, page]);\r\n\r\n  const handlePageChange = (newPage) => {\r\n    if (newPage > 0 && newPage <= totalPages) {\r\n      setPage(newPage);\r\n    }\r\n  };\r\n\r\n  const handleEditClick = (vendorId) => {\r\n    if (isAdmin || (userVendorId && vendorId === userVendorId)) {\r\n      navigate(`/edit-vendor/${vendorId}`);\r\n    } else {\r\n      console.log('Non-admin user cannot edit vendors');\r\n    }\r\n  };\r\n\r\n  const handleSearchChange = (event) => {\r\n    const searchValue = event.target.value;\r\n    setSearchTerm(searchValue);\r\n\r\n    if (searchValue) {\r\n      const results = vendors.filter(vendor => vendor.name.toLowerCase().includes(searchValue.toLowerCase()));\r\n      setFilteredVendors(results);\r\n      setShowDropdown(true);\r\n    } else {\r\n      setFilteredVendors([]); // Hide dropdown when search term is empty\r\n      setShowDropdown(false);\r\n    }\r\n  };\r\n\r\n  const handleSortChange = (event) => {\r\n    setSortOrder(event.target.value);\r\n  };\r\n\r\n  const handleSelectVendor = (vendorId) => {\r\n    setSearchTerm('');\r\n    setShowDropdown(false);\r\n    navigate(`/vendor/${vendorId}`);\r\n  };\r\n\r\n  const handleImageError = (e) => {\r\n    e.target.src = defaultImage;\r\n  };\r\n\r\n  const handleAddVendorClick = () => {\r\n    navigate('/add-vendor');\r\n  };\r\n\r\n  const handleVisitClick = (vendorId) => {\r\n    navigate(`/vendor/${vendorId}`);\r\n  };\r\n\r\n  if (error) {\r\n    return <div className=\"error-message\">{error}</div>;\r\n  }\r\n  const currentPage = page; // use the currentPage state\r\n  \r\n  const startPage = Math.max(1, currentPage - visiblePages + 1);\r\n  const endPage = Math.min(totalPages, currentPage + visiblePages - 1);\r\n  \r\n  const pages = [];\r\n  for (let i = startPage; i <= endPage; i++) {\r\n    pages.push(i);\r\n  }\r\n  return (\r\n    <div className=\"page-container\">\r\n      <div className=\"vendor-list\">\r\n      <ul className=\"vendor-grid\">\r\n        <h1 className=\"title\">Vendors</h1>\r\n\r\n        {/* Search Input Container */}\r\n        <div className={`search-input-container ${showSearchInput ? 'show' : ''}`}>\r\n          <input\r\n            type=\"text\"\r\n            className='search-input'\r\n            placeholder=\"Search vendors...\"\r\n            value={searchTerm}\r\n            onChange={handleSearchChange}\r\n            onFocus={() => searchTerm && setShowDropdown(true)}\r\n            onBlur={() => setTimeout(() => setShowDropdown(false), 200)}\r\n          />\r\n          \r\n        {showDropdown && searchTerm && filteredVendors.length > 0 && (\r\n  <ul className=\"dropdown-menu\">\r\n    {filteredVendors.map(vendor => (\r\n      <li key={vendor.id} onClick={() => handleSelectVendor(vendor.id)} className=\"dropdown-item\">\r\n      <img \r\n  src={vendor.img ||defaultImage } \r\n  alt={vendor.name} \r\n  className=\"vendor-logo\"\r\n  onError={handleImageError}  // Handle image load error\r\n/>\r\n        <span className='vendor-name'>{vendor.name}</span>\r\n      </li>\r\n    ))}\r\n  </ul>\r\n)}\r\n        </div>\r\n        </ul>\r\n\r\n        {/* Sort Selection */}\r\n        <div className=\"sort-selection\">\r\n          <select value={sortOrder} onChange={handleSortChange}>\r\n            <option value=\"latest\">Latest</option>\r\n            <option value=\"name_asc\">Name Ascending</option>\r\n            <option value=\"name_desc\">Name Descending</option>\r\n          </select>\r\n        </div>\r\n        {isAdmin && (\r\n          <button className=\"add-vendor-button\" onClick={handleAddVendorClick}>\r\n            Add Vendor\r\n          </button>\r\n        )}\r\n        {/* Vendors List */}\r\n        <ul className=\"vendor-cards\">\r\n\r\n          {vendors.length > 0 ? (\r\n            vendors.map(vendor => (\r\n              <li key={vendor.id} className=\"vendor-card\">\r\n                <div className=\"vendor-header\">\r\n                <img \r\n  src={vendor.img || defaultImage} \r\n  alt={vendor.name} \r\n  className=\"vendor-logo\"\r\n  onError={handleImageError}  // Handle image load error\r\n/>\r\n                  <div className=\"vendor-content\">\r\n                    <h2 className=\"vendor-name\">{vendor.name}</h2>  \r\n                    <p className=\"vendor-description\">{vendor.description || 'No description available'}</p>\r\n                    <button onClick={() => handleVisitClick(vendor.id)}>Visit</button>\r\n                    {(isAdmin || (userVendorId && vendor.id === userVendorId && userData)) && (\r\n  <button onClick={() => handleEditClick(vendor.id)}>Edit</button>\r\n)}\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            ))\r\n          ) : (\r\n            <li>No vendors found</li>\r\n          )}\r\n        </ul>\r\n        <div className=\"pagination-controls\">\r\n    <button onClick={() => handlePageChange(page - 1)} disabled={page === 1 || loading}>Previous</button>\r\n    {pages.map((page) => (\r\n      <button\r\n        key={page}\r\n        onClick={() => handlePageChange(page)}\r\n        className={currentPage === page ? 'active' : ''}\r\n      >\r\n        {page}\r\n      </button>\r\n    ))}\r\n    {endPage < totalPages && (\r\n      <button onClick={() => handlePageChange(endPage + 1)}>...</button>\r\n    )}\r\n    <button onClick={() => handlePageChange(page + 1)} disabled={page === totalPages || loading}>Next</button>\r\n    {loading && <div className=\"spinner\"></div>}\r\n</div>\r\n</div>\r\n  \r\n  </div>\r\n  \r\n  );\r\n}\r\n\r\nexport default Vendors;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}