{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import'../css/editprofile.css';import defaultImage from'./vendor.jpg';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfile(){const[image,setImage]=useState(null);const[preview,setPreview]=useState(null);const[name,setName]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[phone,setPhone]=useState('');const[errorMessages,setErrorMessages]=useState({name:'',email:'',password:'',phone:'',image:'',general:''});const[loading,setLoading]=useState(true);const[success,setSuccess]=useState(null);const imageRef=useRef(null);const userId=localStorage.getItem('userId');useEffect(()=>{const fetchUserDetails=async()=>{setLoading(true);try{const token=localStorage.getItem('token');if(!token){throw new Error('No token found');}const response=await fetch('https://backend-934694036821.europe-west1.run.app/me',{headers:{Authorization:`Bearer ${token}`}});if(!response.ok){throw new Error(`https error! Status: ${response.status}`);}const data=await response.json();console.log('Fetched user data:',data);if(data.me&&data.me.user_info){const{name,email,phone,img}=data.me.user_info;setName(name||'');setEmail(email||'');setPhone(phone||'');setPreview(img||defaultImage);localStorage.setItem('userId',data.me.user_info.id);}else{console.error('No user_info in response:',data);setErrorMessages(prev=>({...prev,general:'User data is missing in response'}));}}catch(error){console.error('Error fetching user details:',error);setErrorMessages(prev=>({...prev,general:'Failed to load user details'}));}finally{setLoading(false);}};fetchUserDetails();},[]);const handleImageClick=event=>{const file=event.target.files[0];if(file){// Check if the file is an image\nconst validTypes=['image/jpeg','image/png','image/gif','image/webp'];if(!validTypes.includes(file.type)){setErrorMessages(prev=>({...prev,image:'Invalid image type. Please upload a JPEG, PNG, GIF, or WEBP image.'}));// Do not clear the current image or preview\nsetImage(null);setPreview(prev=>prev||defaultImage);// Hide the error message after 3 seconds\nsetTimeout(()=>{setErrorMessages(prev=>({...prev,image:''}));},10000);return;}// Check if the image size is valid\nif(file.size>2000000){// 2MB\nsetErrorMessages(prev=>({...prev,image:'Image size must be less than 2MB.'}));// Do not clear the current image or preview\nsetImage(null);setPreview(prev=>prev||defaultImage);// Hide the error message after 3 seconds\nsetTimeout(()=>{setErrorMessages(prev=>({...prev,image:''}));},3000);return;}setErrorMessages(prev=>({...prev,image:''}));setImage(file);const reader=new FileReader();reader.onloadend=()=>{setPreview(reader.result);};reader.readAsDataURL(file);}};const handleSave=async event=>{event.preventDefault();// Initialize formData at the beginning\nconst formData=new FormData();// Reset error messages\nsetErrorMessages({name:'',email:'',password:'',phone:'',image:'',general:''});let hasErrors=false;// Validate fields and set error messages\nif(!name.trim()){setErrorMessages(prev=>({...prev,name:'Name is required.'}));hasErrors=true;}else{formData.append('name',name);}if(!email.trim()){setErrorMessages(prev=>({...prev,email:'Email is required.'}));hasErrors=true;}else{formData.append('email',email);}if(!phone.trim()){setErrorMessages(prev=>({...prev,phone:'Phone number is required.'}));hasErrors=true;}else{formData.append('phone',phone);}// Only append password if it's not empty\nif(password.trim()){formData.append('password',password);}// Check if there are image errors (if any)\nif(errorMessages.image){hasErrors=true;}if(hasErrors){setSuccess(null);return;}// Append image if the user selected one\nif(image){formData.append('img',image);}try{const token=localStorage.getItem('token');const response=await fetch(`https://backend-934694036821.europe-west1.run.app/users/${userId}`,{method:'PUT',headers:{Authorization:`Bearer ${token}`},body:formData});if(!response.ok){var _errorData$error,_errorData$error2,_errorData$error3,_errorData$error4;const errorData=await response.json();console.error('Backend errors:',errorData);const newErrors={name:((_errorData$error=errorData.error)===null||_errorData$error===void 0?void 0:_errorData$error.name)||'',email:((_errorData$error2=errorData.error)===null||_errorData$error2===void 0?void 0:_errorData$error2.email)||'',password:((_errorData$error3=errorData.error)===null||_errorData$error3===void 0?void 0:_errorData$error3.password)||'',phone:((_errorData$error4=errorData.error)===null||_errorData$error4===void 0?void 0:_errorData$error4.phone)||'',image:'',general:''};if(response.status===409&&errorData.error==='Email already exists, try something else'){newErrors.email='Email already exists, try something else.';}setErrorMessages(newErrors);throw new Error('Failed to update profile');}setSuccess('Profile updated successfully');setTimeout(()=>setSuccess(null),2000);// Hide success message after 2 seconds\n}catch(error){console.error('Error updating profile:',error);setErrorMessages(prev=>({...prev,general:'Failed to update profile'}));}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}const handleImageError=e=>{e.target.src=defaultImage;};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-image-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:imageRef,onChange:handleImageClick,style:{display:'none'}}),/*#__PURE__*/_jsx(\"img\",{src:preview,alt:name,className:`profile-image ${!preview?'no-image':defaultImage}`,onError:handleImageError,onClick:()=>{var _imageRef$current;return(_imageRef$current=imageRef.current)===null||_imageRef$current===void 0?void 0:_imageRef$current.click();}}),errorMessages.image&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errorMessages.image})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Profile\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSave,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`form-group ${errorMessages.name?'error':''}`,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",value:name,onChange:e=>setName(e.target.value),style:{borderColor:errorMessages.name?'red':''}}),errorMessages.name&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errorMessages.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:`form-group ${errorMessages.email?'error':''}`,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:email,onChange:e=>setEmail(e.target.value),style:{borderColor:errorMessages.email?'red':''}}),errorMessages.email&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errorMessages.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:`form-group ${errorMessages.phone?'error':''}`,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"phone\",value:phone,onChange:e=>setPhone(e.target.value),style:{borderColor:errorMessages.phone?'red':''}}),errorMessages.phone&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errorMessages.phone})]}),/*#__PURE__*/_jsxs(\"div\",{className:`form-group ${errorMessages.password?'error':''}`,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value),style:{borderColor:errorMessages.password?'red':''}}),errorMessages.password&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errorMessages.password})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:\"Save Changes\"}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:success})]})]}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})]});}export default EditProfile;","map":{"version":3,"names":["React","useState","useEffect","useRef","defaultImage","jsx","_jsx","jsxs","_jsxs","EditProfile","image","setImage","preview","setPreview","name","setName","email","setEmail","password","setPassword","phone","setPhone","errorMessages","setErrorMessages","general","loading","setLoading","success","setSuccess","imageRef","userId","localStorage","getItem","fetchUserDetails","token","Error","response","fetch","headers","Authorization","ok","status","data","json","console","log","me","user_info","img","setItem","id","error","prev","handleImageClick","event","file","target","files","validTypes","includes","type","setTimeout","size","reader","FileReader","onloadend","result","readAsDataURL","handleSave","preventDefault","formData","FormData","hasErrors","trim","append","method","body","_errorData$error","_errorData$error2","_errorData$error3","_errorData$error4","errorData","newErrors","children","handleImageError","e","src","className","ref","onChange","style","display","alt","onError","onClick","_imageRef$current","current","click","onSubmit","encType","htmlFor","value","borderColor","disabled"],"sources":["C:/Users/oG_Ju/OneDrive/Desktop/SadeemVendorapp/frontend/src/components/editprofile.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport '../css/editprofile.css';\r\nimport defaultImage from './vendor.jpg';\r\n\r\nfunction EditProfile() {\r\n  const [image, setImage] = useState(null);\r\n  const [preview, setPreview] = useState(null);\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [phone, setPhone] = useState('');\r\n\r\n  const [errorMessages, setErrorMessages] = useState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n    phone: '',\r\n    image: '',\r\n    general: ''\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [success, setSuccess] = useState(null);\r\n  const imageRef = useRef(null);\r\n  const userId = localStorage.getItem('userId');\r\n\r\n  useEffect(() => {\r\n    const fetchUserDetails = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        if (!token) {\r\n          throw new Error('No token found');\r\n        }\r\n\r\n        const response = await fetch('https://backend-934694036821.europe-west1.run.app/me', {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`https error! Status: ${response.status}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log('Fetched user data:', data);\r\n\r\n        if (data.me && data.me.user_info) {\r\n          const { name, email, phone, img } = data.me.user_info;\r\n          setName(name || '');\r\n          setEmail(email || '');\r\n          setPhone(phone || '');\r\n          setPreview(img || defaultImage);\r\n\r\n          localStorage.setItem('userId', data.me.user_info.id);\r\n        } else {\r\n          console.error('No user_info in response:', data);\r\n          setErrorMessages(prev => ({ ...prev, general: 'User data is missing in response' }));\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching user details:', error);\r\n        setErrorMessages(prev => ({ ...prev, general: 'Failed to load user details' }));\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchUserDetails();\r\n  }, []);\r\n  const handleImageClick = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      // Check if the file is an image\r\n      const validTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\r\n      if (!validTypes.includes(file.type)) {\r\n        setErrorMessages(prev => ({\r\n          ...prev,\r\n          image: 'Invalid image type. Please upload a JPEG, PNG, GIF, or WEBP image.'\r\n        }));\r\n        \r\n        // Do not clear the current image or preview\r\n        setImage(null);\r\n        setPreview(prev => prev || defaultImage);\r\n  \r\n        // Hide the error message after 3 seconds\r\n        setTimeout(() => {\r\n          setErrorMessages(prev => ({ ...prev, image: '' }));\r\n        }, 10000);\r\n  \r\n        return;\r\n      }\r\n  \r\n      // Check if the image size is valid\r\n      if (file.size > 2000000) { // 2MB\r\n        setErrorMessages(prev => ({\r\n          ...prev,\r\n          image: 'Image size must be less than 2MB.'\r\n        }));\r\n  \r\n        // Do not clear the current image or preview\r\n        setImage(null);\r\n        setPreview(prev => prev || defaultImage);\r\n  \r\n        // Hide the error message after 3 seconds\r\n        setTimeout(() => {\r\n          setErrorMessages(prev => ({ ...prev, image: '' }));\r\n        }, 3000);\r\n  \r\n        return;\r\n      }\r\n  \r\n      setErrorMessages(prev => ({ ...prev, image: '' }));\r\n      setImage(file);\r\n  \r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setPreview(reader.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n  const handleSave = async (event) => {\r\n    event.preventDefault();\r\n    \r\n    // Initialize formData at the beginning\r\n    const formData = new FormData();\r\n  \r\n    // Reset error messages\r\n    setErrorMessages({\r\n      name: '',\r\n      email: '',\r\n      password: '',\r\n      phone: '',\r\n      image: '',\r\n      general: '',\r\n    });\r\n  \r\n    let hasErrors = false;\r\n  \r\n    // Validate fields and set error messages\r\n    if (!name.trim()) {\r\n      setErrorMessages(prev => ({ ...prev, name: 'Name is required.' }));\r\n      hasErrors = true;\r\n    } else {\r\n      formData.append('name', name);\r\n    }\r\n  \r\n    if (!email.trim()) {\r\n      setErrorMessages(prev => ({ ...prev, email: 'Email is required.' }));\r\n      hasErrors = true;\r\n    } else {\r\n      formData.append('email', email);\r\n    }\r\n  \r\n    if (!phone.trim()) {\r\n      setErrorMessages(prev => ({ ...prev, phone: 'Phone number is required.' }));\r\n      hasErrors = true;\r\n    } else {\r\n      formData.append('phone', phone);\r\n    }\r\n  \r\n    // Only append password if it's not empty\r\n    if (password.trim()) {\r\n      formData.append('password', password);\r\n    }\r\n  \r\n    // Check if there are image errors (if any)\r\n    if (errorMessages.image) {\r\n      hasErrors = true;\r\n    }\r\n  \r\n    if (hasErrors) {\r\n      setSuccess(null);\r\n      return;\r\n    }\r\n  \r\n    // Append image if the user selected one\r\n    if (image) {\r\n      formData.append('img', image);\r\n    }\r\n  \r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`https://backend-934694036821.europe-west1.run.app/users/${userId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: formData,\r\n      });\r\n  \r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        console.error('Backend errors:', errorData);\r\n  \r\n        const newErrors = {\r\n          name: errorData.error?.name || '',\r\n          email: errorData.error?.email || '',\r\n          password: errorData.error?.password || '',\r\n          phone: errorData.error?.phone || '',\r\n          image: '',\r\n          general: '',\r\n        };\r\n  \r\n        if (response.status === 409 && errorData.error === 'Email already exists, try something else') {\r\n          newErrors.email = 'Email already exists, try something else.';\r\n        }\r\n  \r\n        setErrorMessages(newErrors);\r\n        throw new Error('Failed to update profile');\r\n      }\r\n  \r\n      setSuccess('Profile updated successfully');\r\n      setTimeout(() => setSuccess(null), 2000); // Hide success message after 2 seconds\r\n    } catch (error) {\r\n      console.error('Error updating profile:', error);\r\n      setErrorMessages(prev => ({ ...prev, general: 'Failed to update profile' }));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  \r\n  \r\n\r\n  if (loading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  const handleImageError = (e) => {\r\n    e.target.src = defaultImage;\r\n  };\r\n  return (\r\n    <div className=\"profile-container\">\r\n      <div className=\"profile-image-container\">\r\n        <input\r\n          type=\"file\"\r\n          ref={imageRef}\r\n          onChange={handleImageClick}\r\n          style={{ display: 'none' }}\r\n        />\r\n        <img\r\n          src={preview}\r\n          alt={name}\r\n          className={`profile-image ${!preview ? 'no-image' : defaultImage}`}\r\n          onError={handleImageError}\r\n          onClick={() => imageRef.current?.click()}\r\n        />\r\n        {errorMessages.image && (\r\n          <div className=\"error-message\">{errorMessages.image}</div>\r\n        )}\r\n      </div>\r\n      <div className=\"profile-info-container\">\r\n        <h1>Edit Profile</h1>\r\n        <form onSubmit={handleSave} encType=\"multipart/form-data\">\r\n          <div className={`form-group ${errorMessages.name ? 'error' : ''}`}>\r\n            <label htmlFor=\"name\">Name</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"name\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n              style={{ borderColor: errorMessages.name ? 'red' : '' }}\r\n            />\r\n            {errorMessages.name && (\r\n              <div className=\"error-message\">{errorMessages.name}</div>\r\n            )}\r\n          </div>\r\n         <div className={`form-group ${errorMessages.email ? 'error' : ''}`}>\r\n  <label htmlFor=\"email\">Email</label>\r\n  <input\r\n    type=\"email\"\r\n    id=\"email\"\r\n    value={email}\r\n    onChange={(e) => setEmail(e.target.value)}\r\n    style={{ borderColor: errorMessages.email ? 'red' : '' }}\r\n  />\r\n  {errorMessages.email && (\r\n    <div className=\"error-message\">{errorMessages.email}</div>\r\n  )}\r\n</div>\r\n          <div className={`form-group ${errorMessages.phone ? 'error' : ''}`}>\r\n            <label htmlFor=\"phone\">Phone</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"phone\"\r\n              value={phone}\r\n              onChange={(e) => setPhone(e.target.value)}\r\n              style={{ borderColor: errorMessages.phone ? 'red' : '' }}\r\n            />\r\n            {errorMessages.phone && (\r\n              <div className=\"error-message\">{errorMessages.phone}</div>\r\n            )}\r\n          </div>\r\n          <div className={`form-group ${errorMessages.password ? 'error' : ''}`}>\r\n            <label htmlFor=\"password\">Password</label>\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              style={{ borderColor: errorMessages.password ? 'red' : '' }}\r\n            />\r\n            {errorMessages.password && (\r\n              <div className=\"error-message\">{errorMessages.password}</div>\r\n            )}\r\n          </div>\r\n          <button type=\"submit\" disabled={loading}>Save Changes</button>\r\n          {success && <div className=\"success-message\">{success}</div>}\r\n        </form>\r\n      </div>\r\n      {loading && <div className=\"spinner\"></div>}\r\n\r\n    </div>\r\n  );\r\n  \r\n}\r\n\r\nexport default EditProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}