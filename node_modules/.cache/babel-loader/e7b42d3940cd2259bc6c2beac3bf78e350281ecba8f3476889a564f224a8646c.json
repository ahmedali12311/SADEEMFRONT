{"ast":null,"code":"// src/components/Sidebar.js\nimport React,{useState,useEffect,useRef}from'react';import{Link}from'react-router-dom';import'../css/Sidebar.css';// For styling\nimport{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faBars,faTimes}from'@fortawesome/free-solid-svg-icons';// Import icons\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Sidebar=()=>{const[isOpen,setIsOpen]=useState(false);const[userRole,setUserRole]=useState(null);// State to store user role\nconst sidebarRef=useRef(null);const toggleSidebar=()=>{setIsOpen(prev=>!prev);};const handleClickOutside=event=>{if(sidebarRef.current&&!sidebarRef.current.contains(event.target)){setIsOpen(false);}};useEffect(()=>{// Add event listener to detect clicks outside\ndocument.addEventListener('mousedown',handleClickOutside);return()=>{// Clean up event listener on component unmount\ndocument.removeEventListener('mousedown',handleClickOutside);};},[]);useEffect(()=>{const fetchUserRole=async()=>{try{const token=localStorage.getItem('token');const response=await fetch('http://localhost:8080/me',{headers:{Authorization:`Bearer ${token}`}});if(!response.ok){if(response.status===401){// Handle unauthorized access\nreturn;}throw new Error(`https error! status: ${response.status}`);}const data=await response.json();setUserRole(data.me.user_role);}catch(error){console.error('Error fetching user role:',error);}};fetchUserRole();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{ref:sidebarRef,className:`sidebar ${isOpen?'open':''}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-content\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/vendors\",children:\"Vendors\"})}),userRole==='1'&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/users\",children:\"Users\"})})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-toggle\",onClick:toggleSidebar,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:isOpen?faTimes:faBars})})]}),isOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"overlay\",onClick:toggleSidebar})]});};export default Sidebar;","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","FontAwesomeIcon","faBars","faTimes","jsx","_jsx","jsxs","_jsxs","Sidebar","isOpen","setIsOpen","userRole","setUserRole","sidebarRef","toggleSidebar","prev","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","fetchUserRole","token","localStorage","getItem","response","fetch","headers","Authorization","ok","status","Error","data","json","me","user_role","error","console","children","ref","className","to","onClick","icon"],"sources":["C:/Users/oG_Ju/OneDrive/Desktop/SadeemVendorapp/frontend/src/components/sidebar.js"],"sourcesContent":["// src/components/Sidebar.js\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Link } from 'react-router-dom';\nimport '../css/Sidebar.css'; // For styling\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBars, faTimes } from '@fortawesome/free-solid-svg-icons'; // Import icons\n\nconst Sidebar = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [userRole, setUserRole] = useState(null); // State to store user role\n  const sidebarRef = useRef(null);\n\n  const toggleSidebar = () => {\n    setIsOpen(prev => !prev);\n  };\n\n  const handleClickOutside = (event) => {\n    if (sidebarRef.current && !sidebarRef.current.contains(event.target)) {\n      setIsOpen(false);\n    }\n  };\n\n  useEffect(() => {\n    // Add event listener to detect clicks outside\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      // Clean up event listener on component unmount\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  useEffect(() => {\n    const fetchUserRole = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await fetch('http://localhost:8080/me', {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n\n        if (!response.ok) {\n          if (response.status === 401) {\n            // Handle unauthorized access\n            return;\n          }\n          throw new Error(`https error! status: ${response.status}`);\n        }\n\n        const data = await response.json();\n        setUserRole(data.me.user_role);\n      } catch (error) {\n        console.error('Error fetching user role:', error);\n      }\n    };\n\n    fetchUserRole();\n  }, []);\n\n  return (\n    <div>\n      <div ref={sidebarRef} className={`sidebar ${isOpen ? 'open' : ''}`}>\n        <div className=\"sidebar-content\">\n          <ul>\n            <li><Link to=\"/vendors\">Vendors</Link></li>\n            {userRole === '1' && (\n              <li><Link to=\"/users\">Users</Link></li>\n            )}\n          </ul>\n        </div>\n        <button className=\"sidebar-toggle\" onClick={toggleSidebar}>\n          <FontAwesomeIcon \n            icon={isOpen ? faTimes : faBars} \n          />\n        </button>\n      </div>\n      {isOpen && (\n        <div className=\"overlay\" onClick={toggleSidebar}></div>\n      )}\n    </div>\n  );\n};\n\nexport default Sidebar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}